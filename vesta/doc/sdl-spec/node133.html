<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.47)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Evaluation Rules</TITLE>
<META NAME="description" CONTENT="Evaluation Rules">
<META NAME="keywords" CONTENT="paper">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="paper.css">

<LINK REL="next" HREF="node150.html">
<LINK REL="previous" HREF="node132.html">
<LINK REL="up" HREF="node130.html">
<LINK REL="next" HREF="node134.html">
</HEAD>

<body bgcolor="#efefff">
<!--Navigation Panel-->
<A NAME="tex2html2187"
  HREF="node134.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="icons/next.png"></A> 
<A NAME="tex2html2183"
  HREF="node130.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="icons/up.png"></A> 
<A NAME="tex2html2177"
  HREF="node132.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="icons/prev.png"></A> 
<A NAME="tex2html2185"
  HREF="node6.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2188"
  HREF="node134.html">Expr</A>
<B> Up:</B> <A NAME="tex2html2184"
  HREF="node130.html">Semantics</A>
<B> Previous:</B> <A NAME="tex2html2178"
  HREF="node132.html">Type Declarations</A>
 &nbsp <B>  <A NAME="tex2html2186"
  HREF="node6.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION001333000000000000000"></A><A NAME="sect:SDL-eval-rules"></A>
<BR>
Evaluation Rules
</H2>

<P>
The evaluation of a Vesta program corresponds to the abstract
evaluation:

<P>
<PRE>
  Eval( M([]) , C-initial)
</PRE>

<P>
where <EM>M</EM> is the closure corresponding to the contents of an
immutable file (a system model) in the Vesta repository and <EM>C-initial</EM> is an initial context. <EM>M</EM>'s model should have the
syntactic form defined by the nonterminal Model described in
Section&nbsp;<A HREF="node146.html#sect:SDL-model">A.3.3.13</A> below. <EM>C-initial</EM> defines the names
and associated values of the built-in primitive operators and
functions described in Section&nbsp;<A HREF="node150.html#sect:SDL-primitives">A.3.4</A> below.

<P>
The definition of Eval by cases follows. Unless E is handled by one of
these cases, Eval(E, C) yields a runtime error. As mentioned above,
the domain of Eval includes the language generated by the concrete
grammar as a proper subset. Thus, in some of the cases below, the
expression E can arise only as an intermediate result of another case
of Eval.  These cases are explicitly noted.

<P>
The pseudo-code that defines the various cases of Eval and the
primitive functions should be read like C++. That code assumes the
declaration for the representation of Vesta values shown in
Table&nbsp;<A HREF="node133.html#tbl:SDL-class-val">A.2</A>. Note that the <TT>operator==</TT> is the
one invoked by uses of ``<TT>==</TT>'' in the C++ pseudo-code. It is not
to be confused with the primitive equality operator defined on various
Vesta types in Section&nbsp;<A HREF="node150.html#sect:SDL-primitives">A.3.4</A>. The pseudo-code also
refers to the constants shown in Table&nbsp;<A HREF="node133.html#tbl:SDL-literals">A.3</A>.

<P>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="tbl:SDL-class-val"></A><A NAME="5768"></A>
<TABLE>
<CAPTION><STRONG>Table A.2:</STRONG>
A C++ class declaration for Vesta values.</CAPTION>
<TR><TD><IMG
 WIDTH="444" HEIGHT="222" BORDER="0"
 SRC="img105.png"
 ALT="\begin{table}{\small\begin{verbatim}class val {
public:
operator int();
// ...
...ame type and are equal, and
// false (0) otherwise
}\end{verbatim}}
\end{table}"></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="tbl:SDL-literals"></A><A NAME="5774"></A>
<TABLE>
<CAPTION><STRONG>Table A.3:</STRONG>
Definitions of constants used by the pseudo-code.</CAPTION>
<TR><TD><IMG
 WIDTH="427" HEIGHT="83" BORDER="0"
 SRC="img106.png"
 ALT="\begin{table}{\small\begin{verbatim}static val true; // value of literal TRUE
...
...f literal [ ]
static val err; // value of literal ERR\end{verbatim}}
\end{table}"></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
For convenience, the pseudo-code adopts the following notational
conventions:

<P>

<UL>
<LI>Eval is defined by cases rather than by one C++ function
with an enormous embedded case selection.

<P>
</LI>
<LI>Recursive references to Eval appear inline in the same form that is used
to identify the individual cases.

<P>
</LI>
<LI>Primitive functions of the Vesta language, whose names begin with an
underscore, are invoked inline from the pseudo-code as if they were
ordinary C++ functions.  The primitive operators of the Vesta language
are invoked in this way too; for example, when the pseudo-code refers to
operator+, it means the Vesta primitive function, not the C++
operator. Note that some of the Vesta operators are overloaded by type,
but not by arity. For example, operator+ is defined on integers,
texts, lists, and bindings, but it always takes two arguments.

<P>
</LI>
<LI>In the pseudo-code for rules that contain the terminal
Id, the variable <TT>id</TT> denotes the value of the Id
represented as a t_text.

<P>
</LI>
<LI>If the pseudo-statement <TT>error</TT> is reached, evaluation halts
with a runtime error and appropriate error message.
No value is produced.
</LI>
</UL>

<P>
In each of the following sections, we first present the relevant
portions of the language syntax. We then present the evaluation rules
that apply to those syntactic constructs. The complete language syntax
is given in Section&nbsp;<A HREF="node160.html#sect:SDL-syntax">A.4</A>.

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2189"
  HREF="node134.html">Expr</A>
<LI><A NAME="tex2html2190"
  HREF="node135.html">Literal</A>
<LI><A NAME="tex2html2191"
  HREF="node136.html">Id</A>
<LI><A NAME="tex2html2192"
  HREF="node137.html">List</A>
<LI><A NAME="tex2html2193"
  HREF="node138.html">Binding</A>
<LI><A NAME="tex2html2194"
  HREF="node139.html">Select</A>
<LI><A NAME="tex2html2195"
  HREF="node140.html">Block</A>
<LI><A NAME="tex2html2196"
  HREF="node141.html">Stmt</A>
<LI><A NAME="tex2html2197"
  HREF="node142.html">Assign</A>
<LI><A NAME="tex2html2198"
  HREF="node143.html">Iterate</A>
<LI><A NAME="tex2html2199"
  HREF="node144.html">FuncDef</A>
<LI><A NAME="tex2html2200"
  HREF="node145.html">FuncCall</A>
<LI><A NAME="tex2html2201"
  HREF="node146.html">Model</A>
<LI><A NAME="tex2html2202"
  HREF="node147.html">Files</A>
<LI><A NAME="tex2html2203"
  HREF="node148.html">Imports</A>
<LI><A NAME="tex2html2204"
  HREF="node149.html">Filename Interpretation</A>
</UL>
<!--End of Table of Child-Links-->
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2187"
  HREF="node134.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="icons/next.png"></A> 
<A NAME="tex2html2183"
  HREF="node130.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="icons/up.png"></A> 
<A NAME="tex2html2177"
  HREF="node132.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="icons/prev.png"></A> 
<A NAME="tex2html2185"
  HREF="node6.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2188"
  HREF="node134.html">Expr</A>
<B> Up:</B> <A NAME="tex2html2184"
  HREF="node130.html">Semantics</A>
<B> Previous:</B> <A NAME="tex2html2178"
  HREF="node132.html">Type Declarations</A>
 &nbsp <B>  <A NAME="tex2html2186"
  HREF="node6.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Allan Heydon, Roy Levin, Timothy Mann, Yuan Yu
</ADDRESS>
</BODY>
</HTML>
