<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>BestPractices/RepositoryOrganization - Vesta Wiki</title>
<script type="text/javascript" src="../moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: BestPractices/RepositoryOrganization" href="RepositoryOrganization%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=BestPractices%252FRepositoryOrganization&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="RepositoryOrganization%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="RepositoryOrganization%3Faction=print.html">
<link rel="Up" href="../BestPractices.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="RepositoryOrganization.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="../BestPractices.html">BestPractices</a></li><li><a href="RepositoryOrganization.html">RepositoryOrganization</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="RepositoryOrganization.html">RepositoryOrganization</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="RepositoryOrganization%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h1 id="Repository_Organization">Repository Organization</h1>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line862">Always remember that top-level directories in the repository (i.e. those directly below <tt>/vesta</tt>) should be globally unique.  To quote <a class="http" href="../../vesta/doc/man/html/repository.8.html#Warning">the repository server man page</a>: <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><ul><li style="list-style-type:none"><p class="line862">Warning: Every name created directly under <tt>/vesta</tt> (more precisely, directly under <tt>[UserInterface]AppendableRootName</tt>) must be globally unique across all repositories in the universe in the past, present, or future.  If you break this rule, your repository will have problems participating in the replication protocol with those repositories that have conflicting names.  We strongly recommend that every name you create in this directory be an Internet domain name that belongs to you; if everyone does so, uniqueness is guaranteed.  Do not reuse a name unless you are certain that the previous use of the name has been permanently deleted in all repository replicas, including replicas that might be recreated from backup media or the like. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></li></ul><p class="line874">Below these globally unique  top-level directories, Vesta allows you to create a hierarchy of directories to contain your packages.  Vesta builds can use sources from multiple different packages, and most projects split up their sources into many different packages.  Some important things to consider when creating a project hierarchy in Vesta: <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><ul><li><p class="line891"><strong>Package contention</strong>: Normally when you run <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html">vcheckout</a>, if someone else has the same package checked out you'll get an error message.  There are a variety of ways around this (creating a branch with <a class="http" href="../../vesta/doc/man/html/vbranch.1.html">vbranch</a>, performing a non-exclusive checkout with <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-N">vcheckout -N</a>).  However, users often prefer to avoid these additional steps.  Many projects try to minimize contention by the division of their sources into packages. <span class="anchor" id="line-14"></span></li><li><p class="line891"><strong>Planning for change</strong>: Over the course of a project, especially long-lived ones, you may have reason to change your Vesta repository hierarchy.  However, because of Vesta's property of <em>immortal names</em>, you can't do things like rename existing packages.  (See <a href="../RepositoryRules.html">RepositoryRules</a> and <a href="ReorganizingRepos.html">ReorganizingRepos</a>.)  The currently recommended practice is to <a href="ReorganizingRepos#number_root_dir.html">number your top-level directories</a> and expect to create additional ones as your project hierarchy changes. <span class="anchor" id="line-15"></span></li><li><p class="line891"><strong>Package mastership</strong>: Each package has a particular repository which holds its <a class="http" href="../../vesta/doc/man/html/vesta-intro.1.html#master">master</a> copy.  Peer repositories can check out remotely from it, and this can be essentially transparent to the user with the proper setup (see <a href="../RemoteCheckoutSetup.html">RemoteCheckoutSetup</a>).  However, it does require making network connections to the remote master repository, which can introduce additional delay and be problematic if there's a loss of connectivity or the master repository goes down.  If you use multiple repositories, you may wish to place mastership of packages at those repositories which have some affinity to the individuals likely to be making changes to them.  (See the <a class="http" href="../../vesta/doc/man/html/vmaster.1.html">vmaster(1) man page</a> for how to explicitly move mastership between repositories.) <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></li></ul><p class="line862">While there are no hard rules about naming, there are two second-level directory names (i.e. those below the Internet domain based names, such as &quot;<em><strong>foo</em></strong>&quot; in &quot;/vesta/example.com/<em><strong>foo</strong></em>&quot;) which have a common usage in Vesta: <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><dl><dt>platforms</dt><dd><p class="line862">This is normally used to store the packages containing OS component files (standard compilers and libraries, etc.).  These are normally created with <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/extras/pkg2vesta">pkg2vesta</a> and usually have a hierarchy below them that follows the convention &quot;/vesta/example.com/<strong>platforms</strong>/<em>os</em>/<em>vendor</em>/<em>cpu</em>&quot;.  See <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms">/vesta/vestasys.org/platforms</a> for an example. <span class="anchor" id="line-20"></span></dd><dt>bridges</dt><dd><p class="line862">This is normally used to store libraries of Vesta SDL code used for running different tools.  See <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges">/vesta/vestasys.org/bridges</a> for an example. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></dd></dl><p class="line862">You might also want to look at the organization of sources under <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org">/vesta/vestasys.org</a> to see how the Vesta project organizes its repository. <span class="anchor" id="line-23"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

