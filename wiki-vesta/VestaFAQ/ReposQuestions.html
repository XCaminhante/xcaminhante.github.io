<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>VestaFAQ/ReposQuestions - Vesta Wiki</title>
<script type="text/javascript" src="moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: VestaFAQ/ReposQuestions" href="ReposQuestions%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=VestaFAQ%252FReposQuestions&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="ReposQuestions%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="ReposQuestions%3Faction=print.html">
<link rel="Up" href="VestaFAQ.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="ReposQuestions.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="VestaFAQ.html">VestaFAQ</a></li><li><a href="ReposQuestions.html">ReposQuestions</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="ReposQuestions.html">VestaFAQ/ReposQuestions</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="ReposQuestions%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">Questions in this catagory: <span class="anchor" id="line-6"></span><ol type="1"><li><p class="line891"><a href="ReposQuestions.html#package-parent">When trying to create a package, I get an error that the parent directory &quot;does not have type package-parent&quot;</a> <span class="anchor" id="line-7"></span></li><li><p class="line891"><a href="ReposQuestions.html#accident">I checked something out by accident. Can I undo it?</a> <span class="anchor" id="line-8"></span></li><li><p class="line891"><a href="ReposQuestions.html#orphaned_checkout">I removed my working directory by accident or instead of checking in.  How can I fix it?</a> <span class="anchor" id="line-9"></span></li><li><p class="line891"><a href="ReposQuestions.html#mkdir4vcreate">I used &quot;mkdir&quot; when I meant &quot;vcreate&quot;.  How can I fix it?</a> <span class="anchor" id="line-10"></span></li><li><p class="line891"><a href="ReposQuestions.html#vcreate4mkdir">I used &quot;vcreate&quot; when I meant &quot;mkdir&quot;.  How can I fix it?</a> <span class="anchor" id="line-11"></span></li><li><p class="line891"><a href="ReposQuestions.html#numerical">Can I have a package with a numerical name?</a> <span class="anchor" id="line-12"></span></li><li><p class="line891"><a href="ReposQuestions.html#pkginpkg">Can I create a package inside an existing package?</a> <span class="anchor" id="line-13"></span></li><li><p class="line891"><a href="ReposQuestions.html#toobig">When running vadvance, I get the error &quot;vadvance: filename is too big&quot;</a> <span class="anchor" id="line-14"></span></li><li><p class="line891"><a href="ReposQuestions.html#skeleton">How can I create a new package with an initial skeleton version?</a> <span class="anchor" id="line-15"></span></li><li><p class="line891"><a href="ReposQuestions.html#promote">How can I promote a version from a branch to the main line?</a> <span class="anchor" id="line-16"></span></li><li><p class="line891"><a href="ReposQuestions.html#vcheckout-w_must_be_in_vw">I tried to use vcheckout's -w flag.  Why did it say &quot;/home/jsmith/tmp/vesta is not in the Vesta repository?</a>  <span class="anchor" id="line-17"></span></li></ol><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-18"></span><dl><dt>When trying to create a package, I get an error that the parent directory &quot;does not have type package-parent&quot;</dt><dd><p class="line891"><span class="anchor" id="package-parent"></span><a class="http" href="../../vesta/doc/man/html/vcreate.1.html">vcreate</a> will only let you create a package in a directory that has an attribute that means &quot;It's OK to create packages here&quot;.  This is intended to protect against people accidentally creating packages in places they shouldn't.<br>
<br>
You can add this attribute to a directory at any time with &quot;<a class="http" href="../../vesta/doc/man/html/vattrib.1.html">vattrib</a> -a type package-parent <em>directory</em>&quot;. <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line862">When creating directories in the repository which you want to contain packages, you should use &quot;<a href="../vmkdir.html">vmkdir</a> -p <em>directory-name</em>&quot;, as it automatically does this step for you, as well as creating the directory. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line862">Note that if you're using multiple repositories, you need to pay attention to which repository needs the attribute.  The type attribute must include the value <tt>package-parent</tt> <em>at the master repository of the directory you're trying to create a package inside of</em>.  The error message from <a class="http" href="../../vesta/doc/man/html/vcreate.1.html">vcreate</a> will indicate which repository is missing the attribute: <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><ul><li style="list-style-type:none"><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><pre><span class="anchor" id="line-1"></span>vcreate: /vesta/example.com/foo/bar at vesta2.ca.example.com:21776 does not have type package-parent</pre><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span></li></ul>In this case, the command to add the attribute at the right repository would be: <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><ul><li style="list-style-type:none"><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><pre><span class="anchor" id="line-1-1"></span>vattrib -R vesta2.ca.example.com:21776 -a type package-parent /vesta/example.com/foo/bar</pre><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></li></ul><p class="line862">Note also that vcreate will skip this sanity check if you give it <a class="http" href="../../vesta/doc/man/html/vcreate.1.html#-f">the -f flag</a>.  Of course there's usually no reason to skip this check, and if a directory really is intended as a container for packages you should add the attribute. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span></dd><dt>I checked something out by accident. Can I undo it?</dt><dd><p class="line891"><span class="anchor" id="accident"></span>Not exactly. When you check out a package, you reserve the next version (unless you use <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-N">vcheckout's &quot;-N&quot;</a> option). There's no way to &quot;unreserve&quot; the new version.<br>
<br>
What you can do is check in exactly what you checked out.  You can do this with &quot;<a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-c">vcheckin -c</a> 0&quot;. <span class="anchor" id="line-37"></span></dd><dt>I removed my working directory by accident or instead of checking in.  How can I fix it?</dt><dd><p class="line891"><span class="anchor" id="orphaned_checkout"></span> (Maybe you mistakenly thought your working directory was for a <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-N">non-exclusive checkout</a>?)<br>
<br>
If you want to re-create your <tt>work-dir</tt> and keep editing, see <a href="../RepositoryTricks/LinkSessionToNewWork.html">RepositoryTricks/LinkSessionToNewWork</a><br>
<br>
You can still check in as long as you can find the <a class="http" href="../../vesta/doc/man/html/vesta-intro.1.html#session">session directory</a> for your checkout.  Suppose the package is <tt>/vesta/example.com/foo</tt> and your checkout had reserved the new version <tt>/vesta/example.com/foo/5</tt>.  (If you're not sure, you can use <a class="http" href="../../vesta/doc/man/html/vwhohas.1.html">vwhohas</a> to find your reservation.)  Then the session directory would be <tt>/vesta/example.com/foo/checkout/5</tt>.  (You can also use <a class="http" href="../../vesta/doc/man/html/vattrib.1.html">vattrib</a> on the reservation to find the session directory.)  Once you know the session directory, all you need to do is tell <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html">vcheckin</a> that <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-W">you don't have a working directory</a> and <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-s">where the session directory is</a>: <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><pre><span class="anchor" id="line-1-2"></span>vcheckin -W -s /vesta/example.com/foo/checkout/5</pre><span class="anchor" id="line-41"></span></dd><dt>I used &quot;mkdir&quot; when I meant &quot;vcreate&quot;.  How can I fix it?</dt><dd><p class="line891"><span class="anchor" id="mkdir4vcreate"></span> Just run the <a class="http" href="../../vesta/doc/man/html/vcreate.1.html">vcreate</a> command you should have.  vcreate can turn an empty appendable directory into a package. <span class="anchor" id="line-42"></span></dd><dt>I used &quot;vcreate&quot; when I meant &quot;mkdir&quot;.  How can I fix it?</dt><dd><p class="line891"><span class="anchor" id="vcreate4mkdir"></span> Technically you don't have to.  As described below <a href="ReposQuestions.html#pkginpkg">you can create a package inside another package</a>.  A package is also a directory.  You might want to remove the checkout subdirectory and the latest links with <a class="http" href="../../vesta/doc/man/html/vrm.1.html">vrm</a> (though they'll leave behind <a class="http" href="../../vesta/doc/man/html/vesta-intro.1.html#ghost">ghosts</a>). <span class="anchor" id="line-43"></span></dd><dt>Can I have a package with a numerical name?</dt><dd><p class="line891"><span class="anchor" id="numerical"></span>Yes. The repository won't care. You can make a package named &quot;3&quot; with a version named &quot;foo&quot;. (See the <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-n">&quot;-n&quot; option on the vcheckout(1) man page</a>.)<br>
<br>
The use of integer version numbers is just the path of least resistance with the existing repository tools. The Vesta repository and builder aren't fundamentally tied to that way of doing things, although there are a few parts of the implementation that might not work quite as well if you chose a different method. (The <a class="http" href="../../vesta/doc/man/html/vupdate.1.html">vupdate(1)</a> tool comes to mind.) It would be a &quot;small matter of programming&quot; to augment or re-write the repository tools to support alternative methods. <span class="anchor" id="line-44"></span></dd><dt>Can I create a package inside an existing package?</dt><dd><p class="line891"><span class="anchor" id="pkginpkg"></span>Yes. Vesta won't infer anything from how you structure the contents of your repository. The repository acts a lot like a filesystem with only a few special rules such as directories and files that are immutable once created. Though it is not the conventional way of doing things, there's nothing that prevents creating a package inside another package right next to versions, and this won't break the system in any way. <span class="anchor" id="line-45"></span></dd><dt>When running vadvance, I get the error &quot;vadvance: filename is too big&quot;</dt><dd><p class="line891"><span class="anchor" id="toobig"></span>This is a limit that's there as a sanity check, to help keep people from accidentally checking in huge files that they didn't really mean to check in (e.g core files, log files, etc.). You can override this safety feature by passing the <a class="http" href="../../vesta/doc/man/html/vadvance.1.html#-Z">-Z flag to vadvance</a>. (When doing this, you may also want to use &quot;<a class="http" href="../../vesta/doc/man/html/vadvance.1.html#-F">-F -1</a>&quot;.) See the <a class="http" href="../../vesta/doc/man/html/vadvance.1.html">man page for vadvance(1)</a> for more details.<br>
<br>
Usually this message serves as a useful warning. The most common time to override this safety feature is when constructing or extending a build environment by checking in tool binaries that you intend to run as part of a Vesta build, or other components like 3rd party libraries for which no source is provided. <span class="anchor" id="line-46"></span></dd><dt>How can I create a new package with an initial skeleton version?</dt><dd><p class="line891"><span class="anchor" id="skeleton"></span>Use <a class="http" href="../../vesta/doc/man/html/vcreate.1.html#-o">vcreate's &quot;-o&quot;</a> command-line option and give it any existing version as an argument.  An exact copy of that version will be used for version 0 of the new package. <span class="anchor" id="line-47"></span></dd><dt>How can I promote a version from a branch to the main line?</dt><dd><p class="line891"><span class="anchor" id="promote"></span>Suppose the version you want to promote is <tt>/vesta/example.com/foo/pkg/3.bar/5</tt>.  You can move it to the main line in two steps: <span class="anchor" id="line-48"></span><ol type="1"><li><p class="line862">Reserve the next version in the package with vcheckout. Avoid creating either a working directory or a session directory with the <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-W">-W</a> and <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-S">-S</a> command-line flags. <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><pre><span class="anchor" id="line-1-3"></span>% vcheckout -W -S /vesta/example.com/foo/pkg
<span class="anchor" id="line-2"></span>Reserving version /vesta/example.com/foo/pkg/6</pre><span class="anchor" id="line-53"></span></li><li><p class="line862">Check in by explicitly specifying the new version and the content with the <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-n">-n</a> and <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-c">-c</a> command-line flags. Also, tell <tt>vcheckin</tt> that there's no working directory and no session directory with the <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-W">-W</a> and <a class="http" href="../../vesta/doc/man/html/vcheckin.1.html#-S">-S</a> command-line flags. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><pre><span class="anchor" id="line-1-4"></span>% vcheckin -W -S -n /vesta/example.com/foo/pkg/6 \
<span class="anchor" id="line-2-1"></span>    -c /vesta/example.com/foo/pkg/3.bar/5
<span class="anchor" id="line-3"></span>Checking in /vesta/example.com/foo/pkg/6</pre><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span></li></ol></dd><dt>I tried to use vcheckout's -w flag.  Why did it say &quot;/home/jsmith/tmp/vesta is not in the Vesta repository&quot;?</dt><dd><p class="line891"><span class="anchor" id="vcheckout-w_must_be_in_vw"></span> You can change where vcheckout puts your working directory when you perform a checkout by using it's <a class="http" href="../../vesta/doc/man/html/vcheckout.1.html#-w">-w flag</a>.  However, the working directory you specify must be inside the mutable portion of the Vesta repository (normally <tt>/vesta-work</tt>).  This is because Vesta tracks the changes you make by monitoring filesystem operations in your working directory.  It can only do this when it is inside the repository's filesystem.  Also, the repository tools record metadata (such as the old version you chekcout is based on) using<a class="http" href="../../vesta/doc/man/html/vesta-intro.1.html#mutable_attributes">attributes</a> on your working directory, which can only be done inside the repository. <span class="anchor" id="line-61"></span></dd></dl><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

