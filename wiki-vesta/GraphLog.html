<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>GraphLog - Vesta Wiki</title>
<script type="text/javascript" src="moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: GraphLog" href="GraphLog%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=GraphLog&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="GraphLog%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="GraphLog%3Faction=print.html">
<link rel="Appendix" title="autogenerated-17a42d0ae99f082a795755597a26b07df0e66cb9.png" href="GraphLog%3Faction=AttachFile&amp;do=view&amp;target=autogenerated-17a42d0ae99f082a795755597a26b07df0e66cb9.png.html">
<link rel="Appendix" title="delete.me.to.regenerate.images" href="GraphLog%3Faction=AttachFile&amp;do=view&amp;target=delete.me.to.regenerate.images.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="GraphLog.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="GraphLog.html">GraphLog</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="GraphLog.html">GraphLog</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="GraphLog%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line862">The <em>graph log</em> is a data structure maintained by the <a class="http" href="../vesta/doc/man/html/VCache.1.html">Vesta cache server</a>.  It's used primarily during weeding, but can also be used by people investigating the contents of the cache for debugging purposes. <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><p class="line874">The name comes from the fact that it contains references from builds to function calls stored in the cache and references from function calls to derived files: <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867"><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><img src="GraphLog%3Faction=AttachFile&amp;do=get&amp;target=autogenerated-17a42d0ae99f082a795755597a26b07df0e66cb9.png" /><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line874">The weeder instructions tell it which builds to keep.  The weeder uses the graph log to find the function calls (i.e. cache entries) to keep and the derived files to keep. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line862">The <a class="http" href="../vesta/doc/man/html/PrintGraphLog.1.html">PrintGraphLog</a> utility prints a debug representation of the contents of the graph log.  Here's how it would print the representation of a function call in the graph log when given the &quot;-verbose&quot; flag: <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line867"><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><pre><span class="anchor" id="line-1"></span>*** Entry 25 ***
<span class="anchor" id="line-2"></span>  Node: 
<span class="anchor" id="line-3"></span>    pk = 6432f002414fa8bd 4808c9d42b08267d
<span class="anchor" id="line-4"></span>    ci = 26
<span class="anchor" id="line-5"></span>    model = 2626079563
<span class="anchor" id="line-6"></span>    kids = { 25 }
<span class="anchor" id="line-7"></span>    refs = { 0x934dd306, 0x934dd308, 0x934dd30a }</pre><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line862">This function call has <a href="PrimaryKey.html">PrimaryKey</a> <tt>6432f002414fa8bd&nbsp;4808c9d42b08267d</tt> and <a href="CacheIndex.html">CacheIndex</a> 26.  It called another function with <a href="CacheIndex.html">CacheIndex</a> 25.  The result of this function included the files <tt>0x934dd306</tt>, <tt>0x934dd308</tt>, <tt>0x934dd30a</tt>.  If a cache entry is kept during weeding, then  the any cache entries listed under &quot;kids&quot; will also be kept as well as the files listed under &quot;refs&quot;. <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line862">Here's how &quot;<a class="http" href="../vesta/doc/man/html/PrintGraphLog.1.html">PrintGraphLog</a> -vebose&quot; would print the representation of a build in progress: <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line867"><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><pre><span class="anchor" id="line-1-1"></span>*** Entry 2814 ***
<span class="anchor" id="line-2-1"></span>  Root: 
<span class="anchor" id="line-3-1"></span>    pkgFP = 72ea3e4ea0883176 1e626b09a6cf5d38
<span class="anchor" id="line-4-1"></span>    model = 2982316067
<span class="anchor" id="line-5-1"></span>    time = Sat Apr  1 20:35:25 2006
<span class="anchor" id="line-6-1"></span>    done = false
<span class="anchor" id="line-7-1"></span>    cis = {
<span class="anchor" id="line-8"></span>      433, 491, 500, 506, 512, 1759, 415, 520, 
<span class="anchor" id="line-9"></span>      521, 418, 488, 496, 503, 509, 1831, 411, 
<span class="anchor" id="line-10"></span>      516, 386, 35440, 392, 388, 393, 387, 47611, 
<span class="anchor" id="line-11"></span>      396, 388, 393 }</pre><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line862">The &quot;pkgFP&quot; is the fingerprint of the immutable directory of the build and the &quot;model&quot; is the shortid of the top-level SDL model.  Together they uniquely identify the build.  The &quot;time&quot; indicates when this build was being performed.  The weeder can select builds to be kept by time with <a class="http" href="../vesta/doc/man/html/VestaWeed.1.html#KeepOption">the -keep flag</a>.  Because this entry has &quot;done = false&quot; it represents a partial build.  A final entry is added with &quot;done = true&quot; when a build completes.  The &quot;cis&quot; is a list of every <a href="CacheIndex.html">CacheIndex</a> in use by the build.  For an incomplete build these are cache entries either added by the build or which the build got from a cache hit.  For a graph log root with &quot;done = true&quot;, there will be a single <a href="CacheIndex.html">CacheIndex</a> in &quot;cis&quot; or the top-level model cache entry. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line874">See also: <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><ul><li><p class="line891"><a href="HowCachingWorks.html">HowCachingWorks</a> <span class="anchor" id="line-69"></span></li><li><p class="line891"><a href="HowWeedingWorks.html">HowWeedingWorks</a> <span class="anchor" id="line-70"></span></li><li><p class="line891"><a href="CacheUnderTheHood.html">CacheUnderTheHood</a> <span class="anchor" id="line-71"></span></li></ul><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

