<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>std_env/MakeNewStdEnv/DebianEtchExample - Vesta Wiki</title>
<script type="text/javascript" src="../../moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: std_env/MakeNewStdEnv/DebianEtchExample" href="DebianEtchExample%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=std_env%252FMakeNewStdEnv%252FDebianEtchExample&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="DebianEtchExample%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="DebianEtchExample%3Faction=print.html">
<link rel="Up" href="../MakeNewStdEnv.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="DebianEtchExample.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="std_env.html">std_env</a></li><li><a href="../MakeNewStdEnv.html">MakeNewStdEnv</a></li><li><a href="DebianEtchExample.html">DebianEtchExample</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="DebianEtchExample.html">DebianEtchExample</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="DebianEtchExample%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="DebianEtchExample.html#Starting_Point:_Debian_sarge_std_env">Starting Point: Debian sarge std_env</a></li><li>
<a href="DebianEtchExample.html#OS_Component_.22Shopping_List.22">OS Component &quot;Shopping List&quot;</a></li><li>
<a href="DebianEtchExample.html#OS_Component_Import">OS Component Import</a><ol><li>
<a href="DebianEtchExample.html#Base_Run-time_Components">Base Run-time Components</a><ol><li>
<a href="DebianEtchExample.html#libc6">libc6</a></li><li>
<a href="DebianEtchExample.html#libstdc.2B-.2B-6">libstdc++6</a></li><li>
<a href="DebianEtchExample.html#libgcc1">libgcc1</a></li></ol></li><li>
<a href="DebianEtchExample.html#C_Compilation">C Compilation</a><ol><li>
<a href="DebianEtchExample.html#binutils">binutils</a></li><li>
<a href="DebianEtchExample.html#cpp-4.1">cpp-4.1</a></li><li>
<a href="DebianEtchExample.html#gcc-4.1">gcc-4.1</a></li><li>
<a href="DebianEtchExample.html#libssp0">libssp0</a></li><li>
<a href="DebianEtchExample.html#libc6-dev">libc6-dev</a></li><li>
<a href="DebianEtchExample.html#linux-kernel-headers">linux-kernel-headers</a></li></ol></li><li>
<a href="DebianEtchExample.html#C.2B-.2B-_Compilation">C++ Compilation</a><ol><li>
<a href="DebianEtchExample.html#g.2B-.2B--4.1">g++-4.1</a></li><li>
<a href="DebianEtchExample.html#libstdc.2B-.2B-6-4.1-dev">libstdc++6-4.1-dev</a></li></ol></li><li>
<a href="DebianEtchExample.html#Lexical_Analyzer_Generation">Lexical Analyzer Generation</a><ol><li>
<a href="DebianEtchExample.html#flex">flex</a></li><li>
<a href="DebianEtchExample.html#m4">m4</a></li></ol></li><li>
<a href="DebianEtchExample.html#Parser_Generation">Parser Generation</a><ol><li>
<a href="DebianEtchExample.html#byacc">byacc</a></li></ol></li></ol></li><li>
<a href="DebianEtchExample.html#SDL_model_updates">SDL model updates</a><ol><li>
<a href="DebianEtchExample.html#build.ves">build.ves</a></li><li>
<a href="DebianEtchExample.html#c.ves">c.ves</a></li><li>
<a href="DebianEtchExample.html#cxx.ves">cxx.ves</a></li><li>
<a href="DebianEtchExample.html#family_map.ves">family_map.ves</a></li><li>
<a href="DebianEtchExample.html#lex.ves">lex.ves</a></li><li>
<a href="DebianEtchExample.html#yacc.ves">yacc.ves</a></li><li>
<a href="DebianEtchExample.html#libgc.ves">libgc.ves</a></li></ol></li></ol></div> <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line874">This page contains an example of creating a new i386 Linux Vesta build <span class="anchor" id="line-8"></span>environment for <a class="http" href="http://www.debian.org/releases/etch/">Debian etch</a> <span class="anchor" id="line-9"></span>(Debian's &quot;testing&quot; distribution as of this writing).  The work was <span class="anchor" id="line-10"></span>performed on an i386 Linux machine running <span class="anchor" id="line-11"></span><a class="http" href="http://www.debian.org/releases/sarge/">Debian sarge</a> (Debian's <span class="anchor" id="line-12"></span>&quot;stable&quot; distribution as of this writing). <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line874">The finished build environment can be found here: <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/beta.vestasys.org/platforms/linux/debian/i386/std_env.etch/1">/vesta/beta.vestasys.org/platforms/linux/debian/i386/std_env.etch/1</a> <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
<h1 id="Starting_Point:_Debian_sarge_std_env">Starting Point: Debian sarge std_env</h1>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">We're going to create this new build environment by starting from the <span class="anchor" id="line-21"></span>Debian sarge build environment and modifying it.  The original can be <span class="anchor" id="line-22"></span>found here: <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2">/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2</a> <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line867">
<h1 id="OS_Component_.22Shopping_List.22">OS Component &quot;Shopping List&quot;</h1>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line862">Based on the imported OS components used by the original build environment, and using the package information we can obtain from <a class="http" href="http://www.debian.org/distrib/packages">the on-line Debian package database</a>, we can draw up a list of OS components we will likely need: <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><ul><li><p class="line862">Base run-time components from <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2/build.ves">build.ves in the original</a>: <span class="anchor" id="line-31"></span><ul><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/libs/libc6">libc6</a> <span class="anchor" id="line-32"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/libs/libstdc++6">libstdc++6</a> <span class="anchor" id="line-33"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/libs/libgcc1">libgcc1</a> <span class="anchor" id="line-34"></span></li></ul></li><li><p class="line862">Components needed for C compilation from <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2/c.ves">c.ves in the original</a>: <span class="anchor" id="line-35"></span><ul><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/binutils">binutils</a> <span class="anchor" id="line-36"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/interpreters/cpp-4.1">cpp-4.1</a> <span class="anchor" id="line-37"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/gcc-4.1">gcc-4.1</a> <span class="anchor" id="line-38"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/libdevel/libc6-dev">libc6-dev</a> <span class="anchor" id="line-39"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/linux-kernel-headers">linux-kernel-headers</a> <span class="anchor" id="line-40"></span></li></ul></li><li><p class="line862">Components needed for C++ compilation from <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2/cxx.ves">cxx.ves in the original</a>: <span class="anchor" id="line-41"></span><ul><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/g++-4.1">g++-4.1</a> <span class="anchor" id="line-42"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/libdevel/libstdc++6-4.1-dev">libstdc++6-4.1-dev</a> <span class="anchor" id="line-43"></span></li></ul></li><li><p class="line862">Components needed for lexical analyzer generation (from <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2/lex.ves">lex.ves in the original</a>): <span class="anchor" id="line-44"></span><ul><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/flex">flex</a> <span class="anchor" id="line-45"></span></li><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/interpreters/m4">m4</a> <span class="anchor" id="line-46"></span></li></ul></li><li><p class="line862">Components needed for parser generation (from <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env/2/yacc.ves">yacc.ves in the original</a>): <span class="anchor" id="line-47"></span><ul><li><p class="line891"><a class="http" href="http://packages.debian.org/testing/devel/byacc">byacc</a> <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></li></ul></li></ul><p class="line862">Note that we chose here to leave out the <a class="http" href="http://packages.debian.org/testing/devel/gcc">gcc</a>, <a class="http" href="http://packages.debian.org/testing/interpreters/cpp">cpp</a>, and <a class="http" href="http://packages.debian.org/testing/devel/g++">g++</a> packages.  Those really only provide aliases (named &quot;<tt>cpp</tt>&quot;, &quot;<tt>gcc</tt>&quot;, and &quot;<tt>g++</tt>&quot;) for the real commands which include the version number in their name (&quot;<tt>cpp-4.1</tt>&quot;, &quot;<tt>gcc-4.1</tt>&quot;, &quot;<tt>g++-4.1</tt>&quot;). <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><p class="line862">Also note that we are leaving out some dependencies.  For example, several of the gcc packages depend on <a class="http" href="http://packages.debian.org/testing/devel/gcc-4.1-base">gcc-4.1-base</a> which is purely a documentation package and is not useful for our purposes. <span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line862">By looking at the dependencies of the packages, we discovered one more that we would probably need: <a class="http" href="http://packages.debian.org/testing/libs/libssp0">libssp0</a>. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line862">After downloading these from a Debian mirror, we have a set of <tt>.deb</tt> package files: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line867"><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><pre><span class="anchor" id="line-1"></span>% ls -1 *.deb
<span class="anchor" id="line-2"></span>binutils_2.17-3_i386.deb
<span class="anchor" id="line-3"></span>byacc_20050813-1_i386.deb
<span class="anchor" id="line-4"></span>cpp-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-5"></span>flex_2.5.33-9_i386.deb
<span class="anchor" id="line-6"></span>g++-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-7"></span>gcc-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-8"></span>libc6-dev_2.3.6.ds1-4_i386.deb
<span class="anchor" id="line-9"></span>libc6_2.3.6.ds1-4_i386.deb
<span class="anchor" id="line-10"></span>libgcc1_4.1.1-13_i386.deb
<span class="anchor" id="line-11"></span>libssp0_4.1.1-13_i386.deb
<span class="anchor" id="line-12"></span>libstdc++6-4.1-dev_4.1.1-13_i386.deb
<span class="anchor" id="line-13"></span>libstdc++6_4.1.1-13_i386.deb
<span class="anchor" id="line-14"></span>linux-kernel-headers_2.6.18-3_i386.deb
<span class="anchor" id="line-15"></span>m4_1.4.7-1_i386.deb</pre><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line867">
<h1 id="OS_Component_Import">OS Component Import</h1>
<span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line874">In this section we'll look at the importing of each OS component and discuss any issues encountered and how they were addressed. <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><p class="line862">Because these are all <tt>.deb</tt> files, we can simply use <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/extras/pkg2vesta">pkg2vesta.pl</a> to perform the import for us. <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><p class="line867">
<h2 id="Base_Run-time_Components">Base Run-time Components</h2>
<span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><p class="line867">
<h3 id="libc6">libc6</h3>
<span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line867"><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><pre><span class="anchor" id="line-1-1"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libc6_2.3.6.ds1-4_i386.deb
<span class="anchor" id="line-2-1"></span>Architecture : i386
<span class="anchor" id="line-3-1"></span>OS           : linux
<span class="anchor" id="line-4-1"></span>Vendor       : debian
<span class="anchor" id="line-5-1"></span>Name         : libc6
<span class="anchor" id="line-6-1"></span>Version      : 2.3.6.ds1-4
<span class="anchor" id="line-7-1"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6
<span class="anchor" id="line-8-1"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4
<span class="anchor" id="line-9-1"></span>Work area    : /tmp/pkg2vesta_IuZqZ
<span class="anchor" id="line-10-1"></span>parent directory exists -- ok
<span class="anchor" id="line-11-1"></span>package exists -- ok
<span class="anchor" id="line-12-1"></span>creating branch
<span class="anchor" id="line-13-1"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4 at dev.vestasys.org:21776
<span class="anchor" id="line-14-1"></span>checking out branch
<span class="anchor" id="line-15-1"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17"></span>Making working directory /vesta-work/ken/libc6
<span class="anchor" id="line-18"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc
<span class="anchor" id="line-19"></span>cp: will not create hard link `/vesta-work/ken/libc6/root/lib/i486-linux-gnu' to directory `/vesta-work/ken/libc6/root/lib/i386-linux-gnu'
<span class="anchor" id="line-20"></span>cp: will not create hard link `/vesta-work/ken/libc6/root/usr/lib/i486-linux-gnu' to directory `/vesta-work/ken/libc6/root/usr/lib/i386-linux-gnu'
<span class="anchor" id="line-21"></span>error -- copying to working directory failed
<span class="anchor" id="line-22"></span>*Not* deleting /tmp/pkg2vesta_IuZqZ</pre><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><p class="line862">In this case, the script detected an error from the copy into the Vesta working directory.  Directory hard links are not supported inside the Vesta repository, which is why that failure occurred.  Fixing this is a simple matter of adding a couple lines to the generated <tt>root.ves</tt> file: <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><p class="line867"><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-56708c752aafa30a50bf92cab0fca01d3399381b\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-56708c752aafa30a50bf92cab0fca01d3399381b" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-56708c752aafa30a50bf92cab0fca01d3399381b_1">   1</a> </span><span class="LineAnchor" id="CA-56708c752aafa30a50bf92cab0fca01d3399381b_1"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">[</span> <span class="ID">lib</span><span class="SPChar">/</span><span class="String">&quot;i486-linux-gnu&quot;</span> <span class="SPChar">=</span> <span class="ID">root</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="String">&quot;i386-linux-gnu&quot;</span> <span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-56708c752aafa30a50bf92cab0fca01d3399381b_2">   2</a> </span><span class="LineAnchor" id="CA-56708c752aafa30a50bf92cab0fca01d3399381b_2"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">[</span> <span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="String">&quot;i486-linux-gnu&quot;</span> <span class="SPChar">=</span> <span class="ID">root</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="String">&quot;i386-linux-gnu&quot;</span> <span class="SPChar">]</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><p class="line862">(We need to quote the names &quot;i486-linux-gnu&quot; and &quot;i386-linux-gnu&quot; because they're not legal <a class="http" href="../../../vesta/doc/sdl-ref/syntax.html#Identifiers">SDL identifiers</a>.) <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><p class="line874">You can see these in the final version of that file: <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4/1/root.ves">/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.6.ds1-4/1/root.ves</a> <span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line867">
<h3 id="libstdc.2B-.2B-6">libstdc++6</h3>
<span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line867"><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><pre><span class="anchor" id="line-1-2"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libstdc++6_4.1.1-13_i386.deb
<span class="anchor" id="line-2-2"></span>Architecture : i386
<span class="anchor" id="line-3-2"></span>OS           : linux
<span class="anchor" id="line-4-2"></span>Vendor       : debian
<span class="anchor" id="line-5-2"></span>Name         : libstdc++6
<span class="anchor" id="line-6-2"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-2"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6
<span class="anchor" id="line-8-2"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6/4.1.1-13
<span class="anchor" id="line-9-2"></span>Work area    : /tmp/pkg2vesta_BPFXX
<span class="anchor" id="line-10-2"></span>parent directory exists -- ok
<span class="anchor" id="line-11-2"></span>creating package
<span class="anchor" id="line-12-2"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6 at dev.vestasys.org:21776
<span class="anchor" id="line-13-2"></span>creating branch
<span class="anchor" id="line-14-2"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-2"></span>checking out branch
<span class="anchor" id="line-16-1"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-1"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-1"></span>Making working directory /vesta-work/ken/libstdc++6
<span class="anchor" id="line-19-1"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><p class="line867">
<h3 id="libgcc1">libgcc1</h3>
<span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><p class="line867"><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><pre><span class="anchor" id="line-1-3"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libgcc1_4.1.1-13_i386.deb
<span class="anchor" id="line-2-3"></span>Architecture : i386
<span class="anchor" id="line-3-3"></span>OS           : linux
<span class="anchor" id="line-4-3"></span>Vendor       : debian
<span class="anchor" id="line-5-3"></span>Name         : libgcc1
<span class="anchor" id="line-6-3"></span>Version      : 1:4.1.1-13
<span class="anchor" id="line-7-3"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libgcc1
<span class="anchor" id="line-8-3"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libgcc1/1:4.1.1-13
<span class="anchor" id="line-9-3"></span>Work area    : /tmp/pkg2vesta_ydqAK
<span class="anchor" id="line-10-3"></span>parent directory exists -- ok
<span class="anchor" id="line-11-3"></span>package exists -- ok
<span class="anchor" id="line-12-3"></span>creating branch
<span class="anchor" id="line-13-3"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libgcc1/1:4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-14-3"></span>checking out branch
<span class="anchor" id="line-15-3"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libgcc1/1:4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-2"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libgcc1/1:4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-2"></span>Making working directory /vesta-work/ken/libgcc1
<span class="anchor" id="line-18-2"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><p class="line867">
<h2 id="C_Compilation">C Compilation</h2>
<span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><p class="line867">
<h3 id="binutils">binutils</h3>
<span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><p class="line867"><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><pre><span class="anchor" id="line-1-4"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org binutils_2.17-3_i386.deb
<span class="anchor" id="line-2-4"></span>Architecture : i386
<span class="anchor" id="line-3-4"></span>OS           : linux
<span class="anchor" id="line-4-4"></span>Vendor       : debian
<span class="anchor" id="line-5-4"></span>Name         : binutils
<span class="anchor" id="line-6-4"></span>Version      : 2.17-3
<span class="anchor" id="line-7-4"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/binutils
<span class="anchor" id="line-8-4"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/binutils/2.17-3
<span class="anchor" id="line-9-4"></span>Work area    : /tmp/pkg2vesta_Oy0rv
<span class="anchor" id="line-10-4"></span>parent directory exists -- ok
<span class="anchor" id="line-11-4"></span>package exists -- ok
<span class="anchor" id="line-12-4"></span>creating branch
<span class="anchor" id="line-13-4"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/binutils/2.17-3 at dev.vestasys.org:21776
<span class="anchor" id="line-14-4"></span>checking out branch
<span class="anchor" id="line-15-4"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/binutils/2.17-3/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-3"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/binutils/2.17-3/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-3"></span>Making working directory /vesta-work/ken/binutils
<span class="anchor" id="line-18-3"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><p class="line867">
<h3 id="cpp-4.1">cpp-4.1</h3>
<span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><p class="line867"><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><pre><span class="anchor" id="line-1-5"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org cpp-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-2-5"></span>Architecture : i386
<span class="anchor" id="line-3-5"></span>OS           : linux
<span class="anchor" id="line-4-5"></span>Vendor       : debian
<span class="anchor" id="line-5-5"></span>Name         : cpp-4.1
<span class="anchor" id="line-6-5"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-5"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1
<span class="anchor" id="line-8-5"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1/4.1.1-13
<span class="anchor" id="line-9-5"></span>Work area    : /tmp/pkg2vesta_AgaD5
<span class="anchor" id="line-10-5"></span>parent directory exists -- ok
<span class="anchor" id="line-11-5"></span>creating package
<span class="anchor" id="line-12-5"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1 at dev.vestasys.org:21776
<span class="anchor" id="line-13-5"></span>creating branch
<span class="anchor" id="line-14-5"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-5"></span>checking out branch
<span class="anchor" id="line-16-4"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-4"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/cpp-4.1/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-4"></span>Making working directory /vesta-work/ken/cpp-4.1
<span class="anchor" id="line-19-2"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><p class="line867">
<h3 id="gcc-4.1">gcc-4.1</h3>
<span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><p class="line867"><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><pre><span class="anchor" id="line-1-6"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org gcc-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-2-6"></span>Architecture : i386
<span class="anchor" id="line-3-6"></span>OS           : linux
<span class="anchor" id="line-4-6"></span>Vendor       : debian
<span class="anchor" id="line-5-6"></span>Name         : gcc-4.1
<span class="anchor" id="line-6-6"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-6"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1
<span class="anchor" id="line-8-6"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13
<span class="anchor" id="line-9-6"></span>Work area    : /tmp/pkg2vesta_AnR25
<span class="anchor" id="line-10-6"></span>parent directory exists -- ok
<span class="anchor" id="line-11-6"></span>creating package
<span class="anchor" id="line-12-6"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1 at dev.vestasys.org:21776
<span class="anchor" id="line-13-6"></span>creating branch
<span class="anchor" id="line-14-6"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-6"></span>checking out branch
<span class="anchor" id="line-16-5"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-5"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-5"></span>Making working directory /vesta-work/ken/gcc-4.1
<span class="anchor" id="line-19-3"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc
<span class="anchor" id="line-20-1"></span>Warning: bad symbolic link: /tmp/pkg2vesta_AnR25/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/64/libssp.so
<span class="anchor" id="line-21-1"></span>                         -&gt; ../../../../../lib64/libssp.so.0
<span class="anchor" id="line-22-1"></span>    (relative, missing)
<span class="anchor" id="line-23"></span>Warning: bad symbolic link: /tmp/pkg2vesta_AnR25/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/64/libgcc_s.so
<span class="anchor" id="line-24"></span>                         -&gt; /lib64/libgcc_s.so.1
<span class="anchor" id="line-25"></span>    (absolute, missing)
<span class="anchor" id="line-26"></span>Warning: bad symbolic link: /tmp/pkg2vesta_AnR25/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/libssp.so
<span class="anchor" id="line-27"></span>                         -&gt; ../../../libssp.so.0
<span class="anchor" id="line-28"></span>    (relative, missing)
<span class="anchor" id="line-29"></span>Warning: bad symbolic link: /tmp/pkg2vesta_AnR25/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/libgcc_s_64.so
<span class="anchor" id="line-30"></span>                         -&gt; /lib64/libgcc_s.so.1
<span class="anchor" id="line-31"></span>    (absolute, missing)</pre><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><p class="line874">In this case, there were several symbolic links pointing to files not contained in this OS component.  These require a little more investigation and work. <span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><p class="line862">When <tt>pkg2vesta.pl</tt> encounters symbolic links like this (ones which point to files or directories not contained in the OS component being imported), it tries to resolve them automatically.  It does this by looking for the target file out in the normal filesystem.  If it exists, it queries the OS packaging system for information about which OS component package it belongs to.  If it can get that information, it then adds lines to the generated <tt>root.ves</tt> file which will, at run-time, reach into the other imported OS component and get the linked-to file/directory (actually a text or binding value in SDL at that point).  It then places it in the result binding for the OS component containing the symbolic link, essentially making a copy of it (though no file copying happens, as this is all manipulation of bindings in SDL). <span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><p class="line874">When it can automatically resolve such a symbolic link, it doesn't produce any additional messages.  However that's not always possible.  Sometimes the OS packaging system doesn't know which OS component the linked-to file belongs to.  Perhaps it's created by a post-installation script rather than included with the OS component package.  Another possibility is that the environment being used to import the new OS components doesn't quite match the environment which would be present in a system where it would normally be installed.  The latter is the case here, as we're importing a component from Debian etch using a system running Debian sarge. <span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><p class="line862">By examining the symbolic links in the output from <tt>pkg2vesta.pl</tt> above, we find that three of them are for 64-bit variants of libraries.  Those are not really needed for our new build environment.  The remaining one (<tt>/usr/lib/gcc/i486-linux-gnu/4.1.2/libssp.so</tt>) has a name that we should recognize from the dependencies we found earlier when making our list of OS components.  When  we look at the contents of <a class="http" href="http://packages.debian.org/testing/libs/libssp0">libssp0</a>, we find the file that the symbolic link is pointing to.  So we again add a little code to the generated <tt>root.ves</tt> to do the same cross-component file reference that <tt>pkg2vesta.pl</tt> would have generated if it could have: <span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><p class="line867"><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-384d52e8e2a4dc2384de8ab4505935633c6b1878\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_1">   1</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_1"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">(</span><span class="ResWord">if</span> <span class="SPChar">(</span><span class="ID">.</span><span class="SPChar">/</span><span class="ID">libssp0</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">!</span><span class="ID">usr</span> <span class="SPChar">&amp;</span><span class="SPChar">&amp;</span> <span class="ID">.</span><span class="SPChar">/</span><span class="ID">libssp0</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">!</span><span class="ID">lib</span> <span class="SPChar">&amp;</span><span class="SPChar">&amp;</span> <span class="ID">.</span><span class="SPChar">/</span><span class="ID">libssp0</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">!</span><span class="ID">libssp</span><span class="ID">.so</span><span class="ID">.0</span> <span class="SPChar">)</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_2">   2</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_2"></span>            <span class="ResWord">then</span> <span class="SPChar">[</span> <span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="ID">gcc</span><span class="SPChar">/</span><span class="String">&quot;i486-linux-gnu&quot;</span><span class="SPChar">/</span><span class="Number">4.1</span><span class="ID">.2</span><span class="SPChar">/</span><span class="ID">libssp</span><span class="ID">.so</span> <span class="SPChar">=</span> <span class="ID">.</span><span class="SPChar">/</span><span class="ID">libssp0</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="ID">libssp</span><span class="ID">.so</span><span class="ID">.0</span> <span class="SPChar">]</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_3">   3</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_3"></span>            <span class="ResWord">else</span> <span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_4">   4</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_4"></span>              <span class="ID">_</span><span class="SPChar">=</span><span class="ID">_print</span><span class="SPChar">(</span><span class="String">&quot;WARNING (from pkg2vesta.pl): /usr/lib/libssp.so.0 not present in component libssp0&quot;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_5">   5</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_5"></span>              <span class="ResWord">value</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_6">   6</a> </span><span class="LineAnchor" id="CA-384d52e8e2a4dc2384de8ab4505935633c6b1878_6"></span>            <span class="SPChar">}</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><p class="line874">You can see this in context in the final version of that file: <span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13/1/root.ves">/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/gcc-4.1/4.1.1-13/1/root.ves</a> <span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><p class="line867">
<h3 id="libssp0">libssp0</h3>
<span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><p class="line862">Now that we're reasonably certain that we actually need <a class="http" href="http://packages.debian.org/testing/libs/libssp0">libssp0</a>, we go ahead and import it. <span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><p class="line867"><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><pre><span class="anchor" id="line-1-7"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libssp0_4.1.1-13_i386.deb
<span class="anchor" id="line-2-7"></span>Architecture : i386
<span class="anchor" id="line-3-7"></span>OS           : linux
<span class="anchor" id="line-4-7"></span>Vendor       : debian
<span class="anchor" id="line-5-7"></span>Name         : libssp0
<span class="anchor" id="line-6-7"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-7"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0
<span class="anchor" id="line-8-7"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0/4.1.1-13
<span class="anchor" id="line-9-7"></span>Work area    : /tmp/pkg2vesta_maIms
<span class="anchor" id="line-10-7"></span>parent directory exists -- ok
<span class="anchor" id="line-11-7"></span>creating package
<span class="anchor" id="line-12-7"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0 at dev.vestasys.org:21776
<span class="anchor" id="line-13-7"></span>creating branch
<span class="anchor" id="line-14-7"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-7"></span>checking out branch
<span class="anchor" id="line-16-6"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-6"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libssp0/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-6"></span>Making working directory /vesta-work/ken/libssp0
<span class="anchor" id="line-19-4"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><p class="line867">
<h3 id="libc6-dev">libc6-dev</h3>
<span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><p class="line867"><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><pre><span class="anchor" id="line-1-8"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libc6-dev_2.3.6.ds1-4_i386.deb
<span class="anchor" id="line-2-8"></span>Architecture : i386
<span class="anchor" id="line-3-8"></span>OS           : linux
<span class="anchor" id="line-4-8"></span>Vendor       : debian
<span class="anchor" id="line-5-8"></span>Name         : libc6-dev
<span class="anchor" id="line-6-8"></span>Version      : 2.3.6.ds1-4
<span class="anchor" id="line-7-8"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev
<span class="anchor" id="line-8-8"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4
<span class="anchor" id="line-9-8"></span>Work area    : /tmp/pkg2vesta_vDiLI
<span class="anchor" id="line-10-8"></span>parent directory exists -- ok
<span class="anchor" id="line-11-8"></span>package exists -- ok
<span class="anchor" id="line-12-8"></span>creating branch
<span class="anchor" id="line-13-8"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4 at dev.vestasys.org:21776
<span class="anchor" id="line-14-8"></span>checking out branch
<span class="anchor" id="line-15-8"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-7"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-7"></span>Making working directory /vesta-work/ken/libc6-dev
<span class="anchor" id="line-18-7"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc
<span class="anchor" id="line-19-5"></span>Warning: bad symbolic link: /tmp/pkg2vesta_vDiLI/target/root/usr/lib/libcidn.so
<span class="anchor" id="line-20-2"></span>                         -&gt; /lib/libcidn.so.1
<span class="anchor" id="line-21-2"></span>    (absolute, missing)</pre><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><p class="line862">Here again we have a cross-package symbolic link which <tt>pkg2vesta.pl</tt> couldn't resolve on its own.  This one is pretty easy to find over in <a class="http" href="http://packages.debian.org/testing/libs/libc6">libc6</a>.  Apparently it's a new library which doesn't exist on Debian sarge.  Again, we insert a little code into the generated <tt>root.ves</tt>: <span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><p class="line867"><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-402c534ae271bd44751ab1535e8a30caf035d815\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-402c534ae271bd44751ab1535e8a30caf035d815" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_1">   1</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_1"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">(</span><span class="ResWord">if</span> <span class="SPChar">(</span><span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libc6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">!</span><span class="String">&quot;lib&quot;</span> <span class="SPChar">&amp;</span><span class="SPChar">&amp;</span> <span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libc6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="String">&quot;lib&quot;</span><span class="SPChar">!</span><span class="ID">libcidn</span><span class="ID">.so</span><span class="ID">.1</span><span class="SPChar">)</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_2">   2</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_2"></span>            <span class="ResWord">then</span> <span class="SPChar">[</span> <span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="ID">libcidn</span><span class="ID">.so</span> <span class="SPChar">=</span> <span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libc6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="ID">libcidn</span><span class="ID">.so</span><span class="ID">.1</span> <span class="SPChar">]</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_3">   3</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_3"></span>            <span class="ResWord">else</span> <span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_4">   4</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_4"></span>              <span class="ID">_</span><span class="SPChar">=</span><span class="ID">_print</span><span class="SPChar">(</span><span class="String">&quot;WARNING (from pkg2vesta.pl):/lib/libcidn.so.1 not present in component libc6&quot;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_5">   5</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_5"></span>              <span class="ResWord">value</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-402c534ae271bd44751ab1535e8a30caf035d815_6">   6</a> </span><span class="LineAnchor" id="CA-402c534ae271bd44751ab1535e8a30caf035d815_6"></span>            <span class="SPChar">}</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><p class="line874">And again, you can see this in the context of the final model: <span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4/1/root.ves">/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.6.ds1-4/1/root.ves</a> <span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><p class="line867">
<h3 id="linux-kernel-headers">linux-kernel-headers</h3>
<span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><p class="line867"><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span><pre><span class="anchor" id="line-1-9"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org linux-kernel-headers_2.6.18-3_i386.deb
<span class="anchor" id="line-2-9"></span>Architecture : i386
<span class="anchor" id="line-3-9"></span>OS           : linux
<span class="anchor" id="line-4-9"></span>Vendor       : debian
<span class="anchor" id="line-5-9"></span>Name         : linux-kernel-headers
<span class="anchor" id="line-6-9"></span>Version      : 2.6.18-3
<span class="anchor" id="line-7-9"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers
<span class="anchor" id="line-8-9"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers/2.6.18-3
<span class="anchor" id="line-9-9"></span>Work area    : /tmp/pkg2vesta_6OeBf
<span class="anchor" id="line-10-9"></span>parent directory exists -- ok
<span class="anchor" id="line-11-9"></span>package exists -- ok
<span class="anchor" id="line-12-9"></span>creating branch
<span class="anchor" id="line-13-9"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers/2.6.18-3 at dev.vestasys.org:21776
<span class="anchor" id="line-14-9"></span>checking out branch
<span class="anchor" id="line-15-9"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers/2.6.18-3/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-8"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers/2.6.18-3/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-8"></span>Making working directory /vesta-work/ken/linux-kernel-headers
<span class="anchor" id="line-18-8"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><p class="line867">
<h2 id="C.2B-.2B-_Compilation">C++ Compilation</h2>
<span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><p class="line867">
<h3 id="g.2B-.2B--4.1">g++-4.1</h3>
<span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><p class="line867"><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span><pre><span class="anchor" id="line-1-10"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org g++-4.1_4.1.1-13_i386.deb
<span class="anchor" id="line-2-10"></span>Architecture : i386
<span class="anchor" id="line-3-10"></span>OS           : linux
<span class="anchor" id="line-4-10"></span>Vendor       : debian
<span class="anchor" id="line-5-10"></span>Name         : g++-4.1
<span class="anchor" id="line-6-10"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-10"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1
<span class="anchor" id="line-8-10"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1/4.1.1-13
<span class="anchor" id="line-9-10"></span>Work area    : /tmp/pkg2vesta_ehRR4
<span class="anchor" id="line-10-10"></span>parent directory exists -- ok
<span class="anchor" id="line-11-10"></span>creating package
<span class="anchor" id="line-12-10"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1 at dev.vestasys.org:21776
<span class="anchor" id="line-13-10"></span>creating branch
<span class="anchor" id="line-14-10"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-10"></span>checking out branch
<span class="anchor" id="line-16-9"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-9"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/g++-4.1/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-9"></span>Making working directory /vesta-work/ken/g++-4.1
<span class="anchor" id="line-19-6"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><p class="line867">
<h3 id="libstdc.2B-.2B-6-4.1-dev">libstdc++6-4.1-dev</h3>
<span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span><p class="line867"><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span><span class="anchor" id="line-412"></span><span class="anchor" id="line-413"></span><span class="anchor" id="line-414"></span><span class="anchor" id="line-415"></span><span class="anchor" id="line-416"></span><span class="anchor" id="line-417"></span><span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span><span class="anchor" id="line-420"></span><span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span><span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span><span class="anchor" id="line-427"></span><span class="anchor" id="line-428"></span><span class="anchor" id="line-429"></span><span class="anchor" id="line-430"></span><span class="anchor" id="line-431"></span><span class="anchor" id="line-432"></span><span class="anchor" id="line-433"></span><span class="anchor" id="line-434"></span><span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span><span class="anchor" id="line-437"></span><pre><span class="anchor" id="line-1-11"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org libstdc++6-4.1-dev_4.1.1-13_i386.deb
<span class="anchor" id="line-2-11"></span>Architecture : i386
<span class="anchor" id="line-3-11"></span>OS           : linux
<span class="anchor" id="line-4-11"></span>Vendor       : debian
<span class="anchor" id="line-5-11"></span>Name         : libstdc++6-4.1-dev
<span class="anchor" id="line-6-11"></span>Version      : 4.1.1-13
<span class="anchor" id="line-7-11"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev
<span class="anchor" id="line-8-11"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13
<span class="anchor" id="line-9-11"></span>Work area    : /tmp/pkg2vesta_q3oce
<span class="anchor" id="line-10-11"></span>parent directory exists -- ok
<span class="anchor" id="line-11-11"></span>creating package
<span class="anchor" id="line-12-11"></span>Creating package /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev at dev.vestasys.org:21776
<span class="anchor" id="line-13-11"></span>creating branch
<span class="anchor" id="line-14-11"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13 at dev.vestasys.org:21776
<span class="anchor" id="line-15-11"></span>checking out branch
<span class="anchor" id="line-16-10"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-10"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-18-10"></span>Making working directory /vesta-work/ken/libstdc++6-4.1-dev
<span class="anchor" id="line-19-7"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc
<span class="anchor" id="line-20-3"></span>Warning: bad symbolic link: /tmp/pkg2vesta_q3oce/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/64/libstdc++.so
<span class="anchor" id="line-21-3"></span>                         -&gt; ../../../../../lib64/libstdc++.so.6
<span class="anchor" id="line-22-2"></span>    (relative, missing)
<span class="anchor" id="line-23-1"></span>Warning: bad symbolic link: /tmp/pkg2vesta_q3oce/target/root/usr/lib/gcc/i486-linux-gnu/4.1.2/libstdc++.so
<span class="anchor" id="line-24-1"></span>                         -&gt; ../../../libstdc++.so.6
<span class="anchor" id="line-25-1"></span>    (relative, missing)
<span class="anchor" id="line-26-1"></span>cp: will not create hard link `/vesta-work/ken/libstdc++6-4.1-dev/root/usr/include/c++/4.1.2' to directory `/vesta-work/ken/libstdc++6-4.1-dev/root/usr/include/c++/4.1'
<span class="anchor" id="line-27-1"></span>error -- copying to working directory failed
<span class="anchor" id="line-28-1"></span>*Not* deleting /tmp/pkg2vesta_q3oce</pre><span class="anchor" id="line-438"></span><span class="anchor" id="line-439"></span><p class="line862">This obviously had both symbolic links which couldn't be resolved and a directory hard link.  Again, one of the symbolic links is for a 64-bit variant of a library which we don't need.  To deal with the other one we add the following to the <tt>root.ves</tt>: <span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span><p class="line867"><span class="anchor" id="line-442"></span><span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span><span class="anchor" id="line-447"></span><span class="anchor" id="line-448"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-df5038fcaca763ebd0213bece77da2ce32e99e8e\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_1">   1</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_1"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">(</span><span class="ResWord">if</span> <span class="SPChar">(</span><span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libstdc++6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">!</span><span class="ID">usr</span> <span class="SPChar">&amp;</span><span class="SPChar">&amp;</span> <span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libstdc++6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">!</span><span class="ID">lib</span> <span class="SPChar">&amp;</span><span class="SPChar">&amp;</span> <span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libstdc++6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">!</span><span class="String">&quot;libstdc++.so.6&quot;</span> <span class="SPChar">)</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_2">   2</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_2"></span>            <span class="ResWord">then</span> <span class="SPChar">[</span> <span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="ID">gcc</span><span class="SPChar">/</span><span class="String">&quot;i486-linux-gnu&quot;</span><span class="SPChar">/</span><span class="Number">4.1</span><span class="ID">.2</span><span class="SPChar">/</span><span class="String">&quot;libstdc++.so&quot;</span> <span class="SPChar">=</span> <span class="ID">.</span><span class="SPChar">/</span><span class="String">&quot;libstdc++6&quot;</span><span class="SPChar">/</span><span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">lib</span><span class="SPChar">/</span><span class="String">&quot;libstdc++.so.6&quot;</span> <span class="SPChar">]</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_3">   3</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_3"></span>            <span class="ResWord">else</span> <span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_4">   4</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_4"></span>              <span class="ID">_</span><span class="SPChar">=</span><span class="ID">_print</span><span class="SPChar">(</span><span class="String">&quot;WARNING (from pkg2vesta.pl):/usr/lib/libstdc++.so.6 not present in component libstdc++6&quot;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_5">   5</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_5"></span>              <span class="ResWord">value</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_6">   6</a> </span><span class="LineAnchor" id="CA-df5038fcaca763ebd0213bece77da2ce32e99e8e_6"></span>            <span class="SPChar">}</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span><p class="line862">To deal with the directory hard link, we add this to the <tt>root.ves</tt>: <span class="anchor" id="line-451"></span><span class="anchor" id="line-452"></span><p class="line867"><span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-66319d188108b617945250dc412b279ff2a70982\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-66319d188108b617945250dc412b279ff2a70982" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-66319d188108b617945250dc412b279ff2a70982_1">   1</a> </span><span class="LineAnchor" id="CA-66319d188108b617945250dc412b279ff2a70982_1"></span>  <span class="ID">root</span> <span class="SPChar">+</span><span class="SPChar">+</span><span class="SPChar">=</span> <span class="SPChar">[</span> <span class="ID">usr</span><span class="SPChar">/</span><span class="ID">include</span><span class="SPChar">/</span><span class="String">&quot;c++&quot;</span><span class="SPChar">/</span><span class="Number">4.1</span><span class="ID">.2</span> <span class="SPChar">=</span> <span class="ID">root</span><span class="SPChar">/</span><span class="ID">usr</span><span class="SPChar">/</span><span class="ID">include</span><span class="SPChar">/</span><span class="String">&quot;c++&quot;</span><span class="SPChar">/</span><span class="Number">4.1</span> <span class="SPChar">]</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span><p class="line874">You can see both of these in the context of the final model: <span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><p class="line867"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13/1/root.ves">/vesta/beta.vestasys.org/platforms/linux/debian/i386/components/libstdc++6-4.1-dev/4.1.1-13/1/root.ves</a> <span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span><p class="line867">
<h2 id="Lexical_Analyzer_Generation">Lexical Analyzer Generation</h2>
<span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span><p class="line867">
<h3 id="flex">flex</h3>
<span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span><p class="line867"><span class="anchor" id="line-465"></span><span class="anchor" id="line-466"></span><span class="anchor" id="line-467"></span><span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><span class="anchor" id="line-477"></span><span class="anchor" id="line-478"></span><span class="anchor" id="line-479"></span><span class="anchor" id="line-480"></span><span class="anchor" id="line-481"></span><span class="anchor" id="line-482"></span><span class="anchor" id="line-483"></span><pre><span class="anchor" id="line-1-12"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org flex_2.5.33-9_i386.deb
<span class="anchor" id="line-2-12"></span>Architecture : i386
<span class="anchor" id="line-3-12"></span>OS           : linux
<span class="anchor" id="line-4-12"></span>Vendor       : debian
<span class="anchor" id="line-5-12"></span>Name         : flex
<span class="anchor" id="line-6-12"></span>Version      : 2.5.33-9
<span class="anchor" id="line-7-12"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/flex
<span class="anchor" id="line-8-12"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/flex/2.5.33-9
<span class="anchor" id="line-9-12"></span>Work area    : /tmp/pkg2vesta_2SPd1
<span class="anchor" id="line-10-12"></span>parent directory exists -- ok
<span class="anchor" id="line-11-12"></span>package exists -- ok
<span class="anchor" id="line-12-12"></span>creating branch
<span class="anchor" id="line-13-12"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/flex/2.5.33-9 at dev.vestasys.org:21776
<span class="anchor" id="line-14-12"></span>checking out branch
<span class="anchor" id="line-15-12"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/flex/2.5.33-9/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-11"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/flex/2.5.33-9/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-11"></span>Making working directory /vesta-work/ken/flex
<span class="anchor" id="line-18-11"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-486"></span><span class="anchor" id="line-487"></span><p class="line867">
<h3 id="m4">m4</h3>
<span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><p class="line867"><span class="anchor" id="line-490"></span><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span><span class="anchor" id="line-497"></span><span class="anchor" id="line-498"></span><span class="anchor" id="line-499"></span><span class="anchor" id="line-500"></span><span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span><span class="anchor" id="line-503"></span><span class="anchor" id="line-504"></span><span class="anchor" id="line-505"></span><span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span><span class="anchor" id="line-508"></span><pre><span class="anchor" id="line-1-13"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org m4_1.4.7-1_i386.deb
<span class="anchor" id="line-2-13"></span>Architecture : i386
<span class="anchor" id="line-3-13"></span>OS           : linux
<span class="anchor" id="line-4-13"></span>Vendor       : debian
<span class="anchor" id="line-5-13"></span>Name         : m4
<span class="anchor" id="line-6-13"></span>Version      : 1.4.7-1
<span class="anchor" id="line-7-13"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/m4
<span class="anchor" id="line-8-13"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/m4/1.4.7-1
<span class="anchor" id="line-9-13"></span>Work area    : /tmp/pkg2vesta_OlziO
<span class="anchor" id="line-10-13"></span>parent directory exists -- ok
<span class="anchor" id="line-11-13"></span>package exists -- ok
<span class="anchor" id="line-12-13"></span>creating branch
<span class="anchor" id="line-13-13"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/m4/1.4.7-1 at dev.vestasys.org:21776
<span class="anchor" id="line-14-13"></span>checking out branch
<span class="anchor" id="line-15-13"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/m4/1.4.7-1/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-12"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/m4/1.4.7-1/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-12"></span>Making working directory /vesta-work/ken/m4
<span class="anchor" id="line-18-12"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><p class="line867">
<h2 id="Parser_Generation">Parser Generation</h2>
<span class="anchor" id="line-513"></span><span class="anchor" id="line-514"></span><p class="line867">
<h3 id="byacc">byacc</h3>
<span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><p class="line867"><span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span><span class="anchor" id="line-525"></span><span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span><span class="anchor" id="line-529"></span><span class="anchor" id="line-530"></span><span class="anchor" id="line-531"></span><span class="anchor" id="line-532"></span><span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span><span class="anchor" id="line-535"></span><pre><span class="anchor" id="line-1-14"></span>% /vesta/vestasys.org/vesta/extras/pkg2vesta/9/pkg2vesta.pl --root /vesta/beta.vestasys.org byacc_20050813-1_i386.deb
<span class="anchor" id="line-2-14"></span>Architecture : i386
<span class="anchor" id="line-3-14"></span>OS           : linux
<span class="anchor" id="line-4-14"></span>Vendor       : debian
<span class="anchor" id="line-5-14"></span>Name         : byacc
<span class="anchor" id="line-6-14"></span>Version      : 20050813-1
<span class="anchor" id="line-7-14"></span>Package path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/byacc
<span class="anchor" id="line-8-14"></span>Branch path : /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/byacc/20050813-1
<span class="anchor" id="line-9-14"></span>Work area    : /tmp/pkg2vesta_bdYFh
<span class="anchor" id="line-10-14"></span>parent directory exists -- ok
<span class="anchor" id="line-11-14"></span>package exists -- ok
<span class="anchor" id="line-12-14"></span>creating branch
<span class="anchor" id="line-13-14"></span>Creating branch /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/byacc/20050813-1 at dev.vestasys.org:21776
<span class="anchor" id="line-14-14"></span>checking out branch
<span class="anchor" id="line-15-14"></span>Reserving version /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/byacc/20050813-1/1 at dev.vestasys.org:21776
<span class="anchor" id="line-16-13"></span>Creating session /vesta/beta.vestasys.org/platforms/linux/debian/i386/components/byacc/20050813-1/checkout/1 at dev.vestasys.org:21776
<span class="anchor" id="line-17-13"></span>Making working directory /vesta-work/ken/byacc
<span class="anchor" id="line-18-13"></span>Note: With Debian, --excludedocs assumes /usr/share/man and /usr/share/doc</pre><span class="anchor" id="line-536"></span><span class="anchor" id="line-537"></span><p class="line874">This package imported cleanly.  No additional work was required. <span class="anchor" id="line-538"></span><span class="anchor" id="line-539"></span><p class="line867">
<h1 id="SDL_model_updates">SDL model updates</h1>
<span class="anchor" id="line-540"></span><span class="anchor" id="line-541"></span><p class="line874">In this section we'll look at code changes made to the SDL models that make up the build environment. <span class="anchor" id="line-542"></span><span class="anchor" id="line-543"></span><p class="line867">
<h2 id="build.ves">build.ves</h2>
<span class="anchor" id="line-544"></span><span class="anchor" id="line-545"></span><p class="line862">This model is really a thin layer that prepares arguments for and calls <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/env_build">env_build</a> which allows us to share common code between different build environments. <span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span><p class="line862">Other than updating the set of OS component imports, we needed to update one of the arguments passed to <tt>env_build</tt>: the list of OS components to be included in the default <tt>./root</tt>.  Since the name of the C++ run-time library OS component has changed, we need to change its name in that list. <span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><p class="line867"><span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span><span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span><span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span><span class="anchor" id="line-556"></span><span class="anchor" id="line-557"></span><span class="anchor" id="line-558"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_1">   1</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_1"></span>@@ <span class="SPChar">-</span><span class="Number">6</span><span class="Number">0</span><span class="SPChar">,</span><span class="Number">6</span> <span class="SPChar">+</span><span class="Number">6</span><span class="Number">0</span><span class="SPChar">,</span><span class="Number">6</span> @@</span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_2">   2</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_2"></span>     <span class="Comment">// Make libc &amp; libstdc++ available for everything.  This simplifies</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_3">   3</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_3"></span>     <span class="Comment">// building a shared executable under Vesta and then running it as a tool</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_4">   4</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_4"></span>     <span class="Comment">// (e.g. the way the lim bridge works).</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_5">   5</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_5"></span><span class="SPChar">-</span>    <span class="ID">root_list</span> <span class="SPChar">=</span> <span class="SPChar">&lt;</span><span class="String">&quot;libc6&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libstdc++5&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libgcc1&quot;</span><span class="SPChar">&gt;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_6">   6</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_6"></span><span class="SPChar">+</span>    <span class="ID">root_list</span> <span class="SPChar">=</span> <span class="SPChar">&lt;</span><span class="String">&quot;libc6&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libstdc++6&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libgcc1&quot;</span><span class="SPChar">&gt;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_7">   7</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_7"></span>   <span class="SPChar">]</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_8">   8</a> </span><span class="LineAnchor" id="CA-4d92555db9b821d4fd547f443a3c955b39d3e2cf_8"></span> <span class="SPChar">}</span></span>
</pre></div><span class="anchor" id="line-559"></span><span class="anchor" id="line-560"></span><p class="line867">
<h2 id="c.ves">c.ves</h2>
<span class="anchor" id="line-561"></span><span class="anchor" id="line-562"></span><p class="line862">This model is responsible for specializing <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/c_like">the c_like bridge</a> for C compilation and setting up various system libraries in the form that the <tt>c_like</tt> bridge accepts. <span class="anchor" id="line-563"></span><span class="anchor" id="line-564"></span><p class="line874">Other than updating the set of OS component imports, we only needed to update the function which prepares the root filesystem to be used for C compilation: <span class="anchor" id="line-565"></span><span class="anchor" id="line-566"></span><p class="line867"><span class="anchor" id="line-567"></span><span class="anchor" id="line-568"></span><span class="anchor" id="line-569"></span><span class="anchor" id="line-570"></span><span class="anchor" id="line-571"></span><span class="anchor" id="line-572"></span><span class="anchor" id="line-573"></span><span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span><span class="anchor" id="line-576"></span><span class="anchor" id="line-577"></span><span class="anchor" id="line-578"></span><span class="anchor" id="line-579"></span><span class="anchor" id="line-580"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="DebianEtchExample.html#" onclick="return togglenumber(\'CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3" lang="en"><span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_1">   1</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_1"></span>@@ <span class="SPChar">-</span><span class="Number">1</span><span class="Number">2</span><span class="Number">1</span><span class="SPChar">,</span><span class="Number">1</span><span class="Number">0</span> <span class="SPChar">+</span><span class="Number">1</span><span class="Number">2</span><span class="Number">0</span><span class="SPChar">,</span><span class="Number">9</span> @@</span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_2">   2</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_2"></span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_3">   3</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_3"></span>   <span class="Comment">/**nocache**/</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_4">   4</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_4"></span>   <span class="ID">root</span><span class="SPChar">(</span><span class="SPChar">)</span> <span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_5">   5</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_5"></span><span class="SPChar">-</span>       <span class="ResWord">return</span> <span class="ID">.</span><span class="SPChar">/</span><span class="ID">build_root</span><span class="SPChar">(</span><span class="SPChar">&lt;</span><span class="String">&quot;cpp&quot;</span><span class="SPChar">,</span> <span class="String">&quot;cpp-3.3&quot;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_6">   6</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_6"></span><span class="SPChar">-</span>                            <span class="String">&quot;gcc&quot;</span><span class="SPChar">,</span> <span class="String">&quot;gcc-3.3&quot;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_7">   7</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_7"></span><span class="SPChar">+</span>       <span class="ResWord">return</span> <span class="ID">.</span><span class="SPChar">/</span><span class="ID">build_root</span><span class="SPChar">(</span><span class="SPChar">&lt;</span><span class="String">&quot;cpp-4.1&quot;</span><span class="SPChar">,</span> <span class="String">&quot;gcc-4.1&quot;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_8">   8</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_8"></span>                             <span class="String">&quot;binutils&quot;</span><span class="SPChar">,</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_9">   9</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_9"></span><span class="SPChar">-</span>                            <span class="String">&quot;libc6&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libc6-dev&quot;</span><span class="SPChar">&gt;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_10">  10</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_10"></span><span class="SPChar">+</span>                            <span class="String">&quot;libc6&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libssp0&quot;</span><span class="SPChar">,</span> <span class="String">&quot;libc6-dev&quot;</span><span class="SPChar">&gt;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_11">  11</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_11"></span>   <span class="SPChar">}</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_12">  12</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_12"></span>   <span class="ID">bridge_params</span> <span class="SPChar">=</span> <span class="SPChar">[</span></span>
<span class="line"><span class="LineNumber"><a href="DebianEtchExample.html#CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_13">  13</a> </span><span class="LineAnchor" id="CA-1491ab13f5d3b821f8306e586337c8c6f0c599a3_13"></span>     <span class="ID">c</span>    <span class="SPChar">=</span> <span class="SPChar">[</span> <span class="ID">bridge_name</span> <span class="SPChar">=</span> <span class="String">&quot;C&quot;</span><span class="SPChar">,</span></span>
</pre></div><span class="anchor" id="line-581"></span><span class="anchor" id="line-582"></span><p class="line862">We added the <tt>libssp0</tt> component, and replaced <tt>cpp-3.3</tt> and <tt>gcc-3.3</tt> with <tt>cpp-4.1</tt> and <tt>gcc-4.1</tt>. <span class="anchor" id="line-583"></span><span class="anchor" id="line-584"></span><p class="line862">We also removed the <tt>cpp</tt> and <tt>gcc</tt> components.  As discussed above, they aren't necessary as they just provide aliases such as <tt>/usr/bin/gcc</tt> and <tt>/usr/bin/cpp</tt> for the commands which contain the version number (<tt>/usr/bin/gcc-4.1</tt> and <tt>/usr/bin/cpp-4.1</tt> in our new build environment.)  See the changes to <tt>family_map.ves</tt> for how we changed the command name used by the <tt>c_like</tt> bridge. <span class="anchor" id="line-585"></span><span class="anchor" id="line-586"></span><p class="line867">
<h2 id="cxx.ves">cxx.ves</h2>
<span class="anchor" id="line-587"></span><span class="anchor" id="line-588"></span><p class="line862">This model is responsible for specializing <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/c_like">the c_like bridge</a> for C++ compilation and setting up additional C++ system libraries in the form that the <tt>c_like</tt> bridge accepts. <span class="anchor" id="line-589"></span><span class="anchor" id="line-590"></span><p class="line862">Other than updating the set of OS component imports and the root function which prepares the root filesystem to be used for C++ compilation (which is very similar to the one in <tt>c.ves</tt>), there were two main changes required in this model: <span class="anchor" id="line-591"></span><span class="anchor" id="line-592"></span><ol type="1"><li><p class="line862">The function <tt>get_gcc_version</tt> extracts the version string from the OS component for gcc to be used when selecting directories containing files needed by other parts of this model.  Unfortunately, in Debian etch it seems that the OS component packages have the version number &quot;4.1.1&quot;, yet the directories are named &quot;4.1.2&quot;.  Rather than try to find some intelligent way of dealing with this, we did the expedient thing and hard-coded the return value of <tt>get_gcc_version</tt>. <span class="anchor" id="line-593"></span></li><li><p class="line862">The functions <tt>lib_stdcplusplus</tt> and <tt>lib_gcc</tt> extract specific library files from directories in certain OS components.  In Debian sarge these files are found below <tt>/usr/lib/gcc-lib</tt> but it seems that in Debian etch they're in <tt>/usr/lib/gcc</tt>.  (This was simple to determine from the SDL error message given when trying to look up &quot;gcc-lib&quot; in <tt>/usr/lib/</tt>.)  <span class="anchor" id="line-594"></span><span class="anchor" id="line-595"></span></li></ol><p class="line867">
<h2 id="family_map.ves">family_map.ves</h2>
<span class="anchor" id="line-596"></span><span class="anchor" id="line-597"></span><p class="line862">In the main-line version of build environments at this time, the command name used to invoke the C and C++ compilers are defined by settings in <tt>family_map.ves</tt>.  We updated these to replace <tt>/usr/bin/gcc</tt> with <tt>/usr/bin/gcc-4.1</tt> and <tt>/usr/bin/g++</tt> with <tt>/usr/bin/g++-4.1</tt>. <span class="anchor" id="line-598"></span><span class="anchor" id="line-599"></span><p class="line862">It's worth mentioning one more benefit of using the version-specific command names <tt>/usr/bin/gcc-4.1</tt> and <tt>/usr/bin/g++-4.1</tt> rather than the generic <tt>/usr/bin/gcc</tt> and <tt>/usr/bin/g++</tt>.  Because the full command line of a <tt>_run_tool</tt> call is included in its primary key, using the command name with the version number means that the compilations with this build environment will have different primary keys from one that uses <tt>/usr/bin/gcc</tt> or <tt>/usr/bin/gcc-3.3</tt>.  This improves cache performance by separating the cache entries into more PKFiles.  It also helps the evaluator distinguish between the different <tt>_run_tool</tt> calls so that if two threads in the same evaluator were performing two compilations with different compiler versions, the evaluator would not wait to see if they were the same call (i.e. not print the &quot;Waiting on possibly identical tool run&quot; message). <span class="anchor" id="line-600"></span><span class="anchor" id="line-601"></span><p class="line862">It's also worth mentioning that <tt>family_map.ves</tt> will be going away soon.  It represents an early attempt at supporting multiple compilers and compiler versions in a single build environment that was developed during the initial porting effort to Alpha Linux (where both <tt>gcc</tt> and a compiler supplied by Compaq were available).  This has been superseded by an improved implementation in <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/c_like/5.multi_version">c_like/5.multi_version</a> which will become the main-line version with the next pre-release. <span class="anchor" id="line-602"></span><span class="anchor" id="line-603"></span><p class="line867">
<h2 id="lex.ves">lex.ves</h2>
<span class="anchor" id="line-604"></span><span class="anchor" id="line-605"></span><p class="line874">The only changes required were updating the imported OS components. <span class="anchor" id="line-606"></span><span class="anchor" id="line-607"></span><p class="line867">
<h2 id="yacc.ves">yacc.ves</h2>
<span class="anchor" id="line-608"></span><span class="anchor" id="line-609"></span><p class="line874">The only changes required were updating the imported OS components. <span class="anchor" id="line-610"></span><span class="anchor" id="line-611"></span><p class="line867">
<h2 id="libgc.ves">libgc.ves</h2>
<span class="anchor" id="line-612"></span><span class="anchor" id="line-613"></span><p class="line874">A small change was made here updating to the latest version of the gc library in Vesta.  It wasn't required for use with Debian etch, but seemed like a good idea. <span class="anchor" id="line-614"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

