<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>std_env/MakeNewStdEnv - Vesta Wiki</title>
<script type="text/javascript" src="../moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: std_env/MakeNewStdEnv" href="MakeNewStdEnv%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=std_env%252FMakeNewStdEnv&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="MakeNewStdEnv%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="MakeNewStdEnv%3Faction=print.html">
<link rel="Up" href="std_env.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="MakeNewStdEnv.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="std_env.html">std_env</a></li><li><a href="MakeNewStdEnv.html">MakeNewStdEnv</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="MakeNewStdEnv.html">std_env/MakeNewStdEnv</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="MakeNewStdEnv%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="MakeNewStdEnv.html#How_to_make_a_new_std_env">How to make a new std_env</a><ol><li>
<a href="MakeNewStdEnv.html#Start_from_an_existing_similar_std_env">Start from an existing similar std_env</a></li><li>
<a href="MakeNewStdEnv.html#Find_the_OS_components_you_need_to_import">Find the OS components you need to import</a><ol><li>
<a href="MakeNewStdEnv.html#Make_a_.22Shopping_List.22_from_the_Old_std_env">Make a &quot;Shopping List&quot; from the Old std_env</a></li><li>
<a href="MakeNewStdEnv.html#Make_a_.22Shopping_List.22_Based_on_Filesystem_Paths">Make a &quot;Shopping List&quot; Based on Filesystem Paths</a></li><li>
<a href="MakeNewStdEnv.html#Inspect_the_Dependencies.2FContents_of_Target_Components">Inspect the Dependencies/Contents of Target Components</a></li></ol></li><li>
<a href="MakeNewStdEnv.html#Import_the_OS_Components">Import the OS Components</a></li><li>
<a href="MakeNewStdEnv.html#Update_std_env_Models">Update std_env Models</a></li><li>
<a href="MakeNewStdEnv.html#Test.2C_Correct.2C_Repeat">Test, Correct, Repeat</a></li></ol></li><li>
<a href="MakeNewStdEnv.html#Examples">Examples</a></li></ol></div> <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867">
<h1 id="How_to_make_a_new_std_env">How to make a new std_env</h1>
<span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867">
<h2 id="Start_from_an_existing_similar_std_env">Start from an existing similar std_env</h2>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">The easiest way to create a new build environment is to start with an <span class="anchor" id="line-12"></span>existing one and modify it.  There are several different ones that you <span class="anchor" id="line-13"></span>can choose from to start from: <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><div><table><tbody><tr>  <td><p class="line862">Debian sarge Linux for i386</td>
  <td><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/i386/std_env">/vesta/vestasys.org/platforms/linux/debian/i386/std_env</a></td>
</tr>
<tr>  <td><span class="anchor" id="line-16"></span><p class="line891">RedHat Linux 7 for i386</td>
  <td><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/redhat/i386/std_env">/vesta/vestasys.org/platforms/linux/redhat/i386/std_env</a></td>
</tr>
<tr>  <td><span class="anchor" id="line-17"></span><p class="line862">Debian sarge Linux for PowerPC</td>
  <td><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/linux/debian/powerpc/std_env">/vesta/vestasys.org/platforms/linux/debian/powerpc/std_env</a></td>
</tr>
<tr>  <td><span class="anchor" id="line-18"></span><p class="line862">Tru64 V4.0 for Alpha</td>
  <td><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/platforms/tru64/hp/alpha/std_env">/vesta/vestasys.org/platforms/tru64/hp/alpha/std_env</a></td>
</tr>
</tbody></table></div><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">Each of these has several SDL model files: <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><ul><li><p class="line862">A base model (<tt>build.ves</tt>) which provides the core of the build environment with no add-ons <span class="anchor" id="line-23"></span></li><li><p class="line862">A collection of add-on models (see <a href="AddonSpec.html">std_env/AddonSpec</a>) for various build environment features: <span class="anchor" id="line-24"></span><ul><li><p class="line862">C compilation (<tt>c.ves</tt>) <span class="anchor" id="line-25"></span></li><li><p class="line862">C++ compilation (<tt>cxx.ves</tt>) <span class="anchor" id="line-26"></span></li><li><p class="line862">Lexical analyzer generation (<tt>lex.ves</tt>) <span class="anchor" id="line-27"></span><ul><li><p class="line862">On some platforms this uses <tt>flex</tt> and on others it uses a vendor supplied <tt>lex</tt> <span class="anchor" id="line-28"></span></li></ul></li><li><p class="line862">Parser generation (<tt>yacc.ves</tt>) <span class="anchor" id="line-29"></span><ul><li><p class="line862">On Linux we've used <tt>byacc</tt> for this, though it might be possible to replace it with <tt>bison</tt> <span class="anchor" id="line-30"></span></li></ul></li><li><p class="line862">The <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/basics">basics libraries</a> (<tt>libbasics.ves</tt>) <span class="anchor" id="line-31"></span></li><li><p class="line862">The <a class="http" href="http://www.hpl.hp.com/personal/Hans_Boehm/gc/">Boehm garbage collector library</a> (<tt>libgc.ves</tt>) <span class="anchor" id="line-32"></span></li><li><p class="line862">The Vesta libraries (<tt>libvesta.ves</tt>) <span class="anchor" id="line-33"></span></li><li><p class="line862">The <a class="http" href="http://zlib.net/">zlib compression library</a> (<tt>libz.ves</tt>) <span class="anchor" id="line-34"></span></li><li><p class="line862">The mtex documentation processing package which we use for the Vesta man pages (<tt>mtex.ves</tt>) <span class="anchor" id="line-35"></span></li><li><p class="line862">The lim interpreted language which mtex is implemented in (<tt>lim.ves</tt>) <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span></li></ul></li></ul><p class="line874">Some of these have a lot of platform-specific pieces. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><ul><li><p class="line891"><tt>build.ves</tt> will include references to the OS components for basic run-time libraries. <span class="anchor" id="line-40"></span></li><li><p class="line862">Models for compilers and other build tools (<tt>c.ves</tt>, <tt>cxx.ves</tt>, <tt>lex.ves</tt>, <tt>yacc.ves</tt>) include references to the OS components containing the binaries for those tools. <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></li></ul><p class="line874">Others are largely platform-independent. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><ul><li><p class="line891"><tt>lim.ves</tt> simply refers to the <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/lim">lim bridge</a> and the other add-ons needed to compile the lim interpreter from source (<tt>c.ves</tt>, <tt>lex.ves</tt>, and <tt>yacc.ves</tt>) <span class="anchor" id="line-45"></span></li><li><p class="line891"><tt>mtex.ves</tt> simply refers to the <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/mtex">mtex bridge</a> and the <tt>lim.ves</tt> add-on <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></li></ul><p class="line867">
<h2 id="Find_the_OS_components_you_need_to_import">Find the OS components you need to import</h2>
<span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">Most of what makes a particular build environment specific to a given <span class="anchor" id="line-50"></span>target platform is the set of files used to populate the encapsulated <span class="anchor" id="line-51"></span>filesystems.  When importing those platform-specific files into Vesta, <span class="anchor" id="line-52"></span>we split them into Vesta packages based on the natural OS packaging <span class="anchor" id="line-53"></span>mechanism (e.g. RPM or the Debian packaging system on many Linux <span class="anchor" id="line-54"></span>systems).  See <a href="OsComponentSpec.html">std_env/OsComponentSpec</a> for more on what's in an OS <span class="anchor" id="line-55"></span>component. <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line874">Creating a new build environment by modifying an old one is largely a <span class="anchor" id="line-58"></span>matter of replacing the OS components with new ones and correcting the <span class="anchor" id="line-59"></span>SDL code to work correctly with the new OS components. <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line867">
<h3 id="Make_a_.22Shopping_List.22_from_the_Old_std_env">Make a &quot;Shopping List&quot; from the Old std_env</h3>
<span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line874">One way to start is to look through the model imports of the SDL <span class="anchor" id="line-64"></span>models in the build environment you are starting from.  It should be <span class="anchor" id="line-65"></span>pretty easy to find the ones which are OS components, as such models <span class="anchor" id="line-66"></span>are conventionally stored below a directory named &quot;components&quot;. <span class="anchor" id="line-67"></span>Here's an example of how you might go about making such a list: <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><p class="line867"><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><pre><span class="anchor" id="line-1"></span>% cd /vesta/vestasys.org/platforms/linux/debian/i386/std_env/2
<span class="anchor" id="line-2"></span>% for f in *.ves; do echo $f; vimports -depth 1 $f | grep /components/; done
<span class="anchor" id="line-3"></span>build.ves
<span class="anchor" id="line-4"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/libc6/2.3.2.ds1-22/1/build.ves...
<span class="anchor" id="line-5"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/libstdc++5/1:3.3.5-13/1/build.ves...
<span class="anchor" id="line-6"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/libgcc1/1:3.4.3-13/1/build.ves...
<span class="anchor" id="line-7"></span>c.ves
<span class="anchor" id="line-8"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/binutils/2.15-6/1/build.ves...
<span class="anchor" id="line-9"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/cpp/4:3.3.5-3/1/build.ves...
<span class="anchor" id="line-10"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/cpp-3.3/1:3.3.5-13/1/build.ves...
<span class="anchor" id="line-11"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/gcc/4:3.3.5-3/1/build.ves...
<span class="anchor" id="line-12"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/gcc-3.3/1:3.3.5-13/1/build.ves...
<span class="anchor" id="line-13"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/libc6-dev/2.3.2.ds1-22/1/build.ves...
<span class="anchor" id="line-14"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/linux-kernel-headers/2.5.999-test7-bk-17/1/build.ves...
<span class="anchor" id="line-15"></span>cxx.ves
<span class="anchor" id="line-16"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/g++/4:3.3.5-3/1/build.ves...
<span class="anchor" id="line-17"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/g++-3.3/1:3.3.5-13/1/build.ves...
<span class="anchor" id="line-18"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/libstdc++5-3.3-dev/1:3.3.5-13/1/build.ves...
<span class="anchor" id="line-19"></span>family_map.ves
<span class="anchor" id="line-20"></span>lex.ves
<span class="anchor" id="line-21"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/flex/2.5.31-31/1/build.ves...
<span class="anchor" id="line-22"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/m4/1.4.2-1/1/build.ves...
<span class="anchor" id="line-23"></span>libbasics.ves
<span class="anchor" id="line-24"></span>libgc.ves
<span class="anchor" id="line-25"></span>libvesta.ves
<span class="anchor" id="line-26"></span>libz.ves
<span class="anchor" id="line-27"></span>lim.ves
<span class="anchor" id="line-28"></span>mtex.ves
<span class="anchor" id="line-29"></span>yacc.ves
<span class="anchor" id="line-30"></span>| /vesta/vestasys.org/platforms/linux/debian/i386/components/byacc/1.9.1-1.1/1/build.ves...</pre><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><p class="line874">From this we can see the set of OS component names used in this <span class="anchor" id="line-103"></span>(Debian sarge) std_env: <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><ul><li>libc6 <span class="anchor" id="line-106"></span></li><li>libstdc++5 <span class="anchor" id="line-107"></span></li><li>libgcc1 <span class="anchor" id="line-108"></span></li><li>binutils <span class="anchor" id="line-109"></span></li><li>cpp <span class="anchor" id="line-110"></span></li><li>cpp-3.3 <span class="anchor" id="line-111"></span></li><li>gcc <span class="anchor" id="line-112"></span></li><li>gcc-3.3 <span class="anchor" id="line-113"></span></li><li>libc6-dev <span class="anchor" id="line-114"></span></li><li>linux-kernel-headers <span class="anchor" id="line-115"></span></li><li>g++ <span class="anchor" id="line-116"></span></li><li>g++-3.3 <span class="anchor" id="line-117"></span></li><li>libstdc++5-3.3-dev <span class="anchor" id="line-118"></span></li><li>flex <span class="anchor" id="line-119"></span></li><li>m4 <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span></li></ul><p class="line874">Based on this list of OS component names, we can look for ones with <span class="anchor" id="line-122"></span>the same names in the other OS.  Of course this method works best when <span class="anchor" id="line-123"></span>the old and new target systems are very similar (e.g. different <span class="anchor" id="line-124"></span>versions of the same vendor's Linux distribution). <span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><p class="line867">
<h3 id="Make_a_.22Shopping_List.22_Based_on_Filesystem_Paths">Make a &quot;Shopping List&quot; Based on Filesystem Paths</h3>
<span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><p class="line874">Another method would be to actually look at the tool command names and <span class="anchor" id="line-129"></span>other filesystem paths being used. <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><p class="line874">There's a general practice of making bridge code such as <span class="anchor" id="line-132"></span>[<a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/lex">http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/lex</a> <span class="anchor" id="line-133"></span>the lex bridge] or <span class="anchor" id="line-134"></span>[<a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/c_like">http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/bridges/c_like</a> <span class="anchor" id="line-135"></span>the C/C++ compilation bridge] accept command names as arguments rather <span class="anchor" id="line-136"></span>than having them hard-coded.  By reading the SDL code which <span class="anchor" id="line-137"></span>specializes the different bridges for a particular platform, you can <span class="anchor" id="line-138"></span>find specific file paths to be used when running the tools. <span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><p class="line874">For system C/C++ libraries, there is SDL code to package up the .a/.so <span class="anchor" id="line-141"></span>files and the associated headers in a way that the c_like bridge can <span class="anchor" id="line-142"></span>use them.  (You can find such references in <tt>c.ves</tt> and <span class="anchor" id="line-143"></span><tt>cxx.ves</tt> among others.) <span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><p class="line874">Other pieces of the std_env SDL code may refer to other filesystem <span class="anchor" id="line-146"></span>paths. <span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><p class="line874">Of course these paths may also be different from one platform to <span class="anchor" id="line-149"></span>another, but the path names can help point you in the right direction. <span class="anchor" id="line-150"></span>If you've found the corresponding file on your target system, there's <span class="anchor" id="line-151"></span>often a method to query the OS packaging system for which OS component <span class="anchor" id="line-152"></span>package contains a given file: <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><div><table><tbody><tr>  <td><p class="line862">RPM systems</td>
  <td><p class="line862">rpm -qf /path/to/some/file</td>
</tr>
<tr>  <td><span class="anchor" id="line-155"></span><p class="line862">Debian systems</td>
  <td><p class="line862">dpkg -S /path/to/some/file</td>
</tr>
<tr>  <td><span class="anchor" id="line-156"></span><p class="line862">Digital/Compaq/HP Tru64 UNIX</td>
  <td><p class="line862">grep /path/to/some/file /usr/.smdb./*.inv</td>
</tr>
</tbody></table></div><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line867">
<h3 id="Inspect_the_Dependencies.2FContents_of_Target_Components">Inspect the Dependencies/Contents of Target Components</h3>
<span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><p class="line874">In some cases, you may need to resort to examining in detail the <span class="anchor" id="line-161"></span>component packages of the target system.  (For example, if you're <span class="anchor" id="line-162"></span>creating a build environment for a system which you don't have a <span class="anchor" id="line-163"></span>running copy of.) <span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><p class="line874">Many packaging systems provide some way to inspect the contents of an <span class="anchor" id="line-166"></span>un-installed package file: <span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><ul><li>RPM <span class="anchor" id="line-169"></span><ul><li><p class="line891"><tt>rpm&nbsp;-qlp&nbsp;foo-1.2.3-4.i386.rpm</tt> will list the contents of the given RPM file <span class="anchor" id="line-170"></span></li></ul></li><li>Debian <span class="anchor" id="line-171"></span><ul><li><p class="line891"><tt>dpkg&nbsp;-c&nbsp;foo_1.2.3-4_i386.deb</tt> will list the contents of the given Debian package file <span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span></li></ul></li></ul><p class="line874">Many packaging systems also provide a way to examine the inter-package <span class="anchor" id="line-174"></span>dependencies of an un-installed package file: <span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><ul><li>RPM <span class="anchor" id="line-177"></span><ul><li><p class="line891"><tt>rpm&nbsp;-q&nbsp;--requires&nbsp;-p&nbsp;foo-1.2.3-4.i386.rpm</tt> <span class="anchor" id="line-178"></span></li></ul></li><li>Debian <span class="anchor" id="line-179"></span><ul><li><p class="line891"><tt>dpkg&nbsp;-f&nbsp;foo_1.2.3-4_i386.deb&nbsp;Depends</tt> <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span></li></ul></li></ul><p class="line874">In many cases you don't actually need to import all the dependencies <span class="anchor" id="line-182"></span>to get a working build environment, but they can be another useful <span class="anchor" id="line-183"></span>clue. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line874">There may be other information you can get from the packaging system <span class="anchor" id="line-186"></span>that will be helpful.  You may want to familiarize yourself with the <span class="anchor" id="line-187"></span>packaging system. <span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><p class="line867">
<h2 id="Import_the_OS_Components">Import the OS Components</h2>
<span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><p class="line874">Now that you have your list of OS components, import them into Vesta <span class="anchor" id="line-192"></span>as sources. <span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><p class="line862">See <a href="MakeNewOsComponent.html">std_env/MakeNewOsComponent</a> for information on how to do this. <span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><p class="line867">
<h2 id="Update_std_env_Models">Update std_env Models</h2>
<span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><p class="line874">Now that you have immutable source versions containing the <span class="anchor" id="line-199"></span>platform-specific files for your target build environment, change the <span class="anchor" id="line-200"></span>imports of your std_env SDL files to refer to them. <span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line874">After you've done that you will want to look through the models for <span class="anchor" id="line-203"></span>any calls to <tt>./build_root</tt> or other references to the OS <span class="anchor" id="line-204"></span>component names and update them if necessary. <span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><p class="line874">You'll also want to check any references to specific file/directory <span class="anchor" id="line-207"></span>paths extracted from the OS components. <span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><p class="line867">
<h2 id="Test.2C_Correct.2C_Repeat">Test, Correct, Repeat</h2>
<span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><p class="line874">At this point, you should be able to start testing your build <span class="anchor" id="line-212"></span>environment.  Some of the kinds of problems you may run into: <span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><ul><li>Tool failures due to missing files requiring you to import more OS components (or different OS components, or additional or different pieces of OS components) <span class="anchor" id="line-215"></span></li><li>SDL errors due to code trying to access files from OS components which aren't there <span class="anchor" id="line-216"></span><ul><li>You might need to fix the SDL code to access different paths <span class="anchor" id="line-217"></span></li><li>You might need to import more OS components <span class="anchor" id="line-218"></span></li></ul></li><li>Errors in your updated SDL code <span class="anchor" id="line-219"></span></li><li><p class="line862">Errors in or warnings from the automatically generated SDL models in OS components imported with <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/extras/pkg2vesta">pkg2vesta.pl</a> (<tt>root.ves</tt>, <tt>build.ves</tt>) <span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span></li></ul><p class="line867">
<h1 id="Examples">Examples</h1>
<span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><p class="line874">Here are a couple examples of the creation of new build environments: <span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><ul><li><p class="line891"><a href="MakeNewStdEnv/DebianEtchExample.html">/DebianEtchExample</a> <span class="anchor" id="line-226"></span></li><li><p class="line891"><a href="MakeNewStdEnv/DebianLennyExample.html">/DebianLennyExample</a> <span class="anchor" id="line-227"></span></li><li><p class="line891"><a href="MakeNewStdEnv/DebianSqueezeExample.html">/DebianSqueezeExample</a> <span class="anchor" id="line-228"></span></li></ul><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

