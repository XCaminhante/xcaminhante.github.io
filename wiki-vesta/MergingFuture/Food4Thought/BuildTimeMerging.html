<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>MergingFuture/Food4Thought/BuildTimeMerging - Vesta Wiki</title>
<script type="text/javascript" src="moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: MergingFuture/Food4Thought/BuildTimeMerging" href="BuildTimeMerging%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=MergingFuture%252FFood4Thought%252FBuildTimeMerging&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="BuildTimeMerging%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="BuildTimeMerging%3Faction=print.html">
<link rel="Up" href="../Food4Thought.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="BuildTimeMerging.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="MergingFuture.html">MergingFuture</a></li><li><a href="../Food4Thought.html">Food4Thought</a></li><li><a href="BuildTimeMerging.html">BuildTimeMerging</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="BuildTimeMerging.html">BuildTimeMerging</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="BuildTimeMerging%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h1 id="A_Different_Mental_Model">A Different Mental Model</h1>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line862">It's become clear to me, mainly through some suggestions by a few astute users at Intel, that current Vesta users have a mental model of merging which differs from the users of most (possibly all) other systems.  Specifically, they think about the merging of different changes as something which <em>happens at build time</em>.  With most other version control systems, merging is something done purely on source files decidedly before a build begins.  Only once the user has completed the merge operation can a build start. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line874">I find this interesting because I didn't expect it at all and it seems to have naturally grown out of the way Vesta works today.  It seems as though it may be worth trying to preserve the experience which led to this mental model with future merging support in Vesta.  Then again, that might break the Vesta model in other undesirable ways.  In any case, I think it's worth exploring the idea further, which is the point of this page. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line867">
<h2 id="How_Build-Time_Merging_Happens_Now">How Build-Time Merging Happens Now</h2>
<span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line867"><em>(Because I intend this page for both Vesta users and non-Vesta users, I'm going to explain some of the basics of Vesta here.)</em> <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line862">One of the ways parallel development works in Vesta today is by splitting sources up into multiple <a class="http" href="../vesta/doc/man/html/vesta-intro.1.html#package">packages</a>.  Packages are versioned independently.  Using multiple packages reduces contention without the need to create <a class="http" href="../vesta/doc/man/html/vbranch.1.html">branches</a> or <a class="http" href="../vesta/doc/man/html/vcheckout.1.html#-N">non-exclusive checkouts</a> (aka &quot;scribbles&quot; or possibly &quot;micro-branches&quot;). <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line862">The sources from multiple packages are then gathered together with <a class="http" href="../vesta/doc/sdl-ref/models.html#import">imports</a> in <a class="http" href="../vesta/doc/sdl-ref/index.html">the language used for writing build instructions</a>.  This creates a specific <em>build configuration</em>.  Consider for example this model: <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><ul><li style="list-style-type:none"><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/vesta_umb/12/build.ves">/vesta/vestasys.org/vesta/vesta_umb/12/build.ves</a> <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></li></ul><p class="line862">If we <a class="http" href="../vesta/doc/man/html/vimports.1.html">examine its imports</a>, we find that it refers to: <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><ul><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/vimports/10">/vesta/vestasys.org/vesta/vimports/10</a> <span class="anchor" id="line-24"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/run_tool/24">/vesta/vestasys.org/vesta/run_tool/24</a> <span class="anchor" id="line-25"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/cache/38">/vesta/vestasys.org/vesta/cache/38</a> <span class="anchor" id="line-26"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/repos_ui/29">/vesta/vestasys.org/vesta/repos_ui/29</a> <span class="anchor" id="line-27"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/repltools/16">/vesta/vestasys.org/vesta/repltools/16</a> <span class="anchor" id="line-28"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/repos/49">/vesta/vestasys.org/vesta/repos/49</a> <span class="anchor" id="line-29"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/fp/12">/vesta/vestasys.org/vesta/fp/12</a> <span class="anchor" id="line-30"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/log/7">/vesta/vestasys.org/vesta/log/7</a> <span class="anchor" id="line-31"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/srpc/26">/vesta/vestasys.org/vesta/srpc/26</a> <span class="anchor" id="line-32"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/config/11">/vesta/vestasys.org/vesta/config/11</a> <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></li></ul><p class="line874">This creates a specific configuration of versions of each of these different packages. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line862">Often builds are set up with some <em>base configuration</em> and a set of <em>version overrides</em> which change the version of specific sources which get used during the build.  For example, in <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/release/12.pre13/7">vesta/release/12.pre13/7</a>, the base configuration is <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/vesta_umb/12/build.ves">vesta_umb/12</a> but the <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/release/12.pre13/7/pkg_ovs.ves">overrides</a> change the versions being used: <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><ul><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/vimports/11">vimports/11</a> overrides <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/vimports/10">vimports/10</a> <span class="anchor" id="line-39"></span></li><li><p class="line891"><a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/run_tool/28">run_tool/28</a> overrides <a class="http" href="http://pub.vestasys.org/cgi-bin/vestaweb?path=/vesta/vestasys.org/vesta/run_tool/24">run_tool/24</a> <span class="anchor" id="line-40"></span></li><li>etc. <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></li></ul><p class="line862">When a user configures a build by setting overrides, they are, in some sense, <em>merging the changes made in the different overrides</em>.  This is of course a clean merge by definition, because all the changes are made to separate files in separate packages.  However, the combined build configuration is clearly the result of merging the different changes together. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line862">In project with multiple developers, users do often refer to the work of others with overrides.  In this way their builds <em>merge changes made by multiple users in parallel</em>. <span class="anchor" id="line-45"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

