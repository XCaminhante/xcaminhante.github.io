<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>vupdateandbranches - Vesta Wiki</title>
<script type="text/javascript" src="moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: vupdateandbranches" href="vupdateandbranches%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=vupdateandbranches&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="vupdateandbranches%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="vupdateandbranches%3Faction=print.html">
<link rel="Appendix" title="branches-as-threads.png" href="vupdateandbranches%3Faction=AttachFile&amp;do=view&amp;target=branches-as-threads.png.html">
<link rel="Appendix" title="reconverge-rediverge.png" href="vupdateandbranches%3Faction=AttachFile&amp;do=view&amp;target=reconverge-rediverge.png.html">
<link rel="Appendix" title="sketch.png" href="vupdateandbranches%3Faction=AttachFile&amp;do=view&amp;target=sketch.png.html">
<link rel="Appendix" title="vupdateandbranches.jpg" href="vupdateandbranches%3Faction=AttachFile&amp;do=view&amp;target=vupdateandbranches.jpg.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="vupdateandbranches.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="vupdateandbranches.html">vupdateandbranches</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="vupdateandbranches.html">vupdateandbranches</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="vupdateandbranches%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line862">In the <img alt="sketch.png" class="attachment" src="vupdateandbranches%3Faction=AttachFile&amp;do=get&amp;target=sketch.png" title="sketch.png" />, we have: <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line874">first box: excerpt from index page, this box shows just ONE website (there si one of these for each site. <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line874">pc.com == site name <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line874">Arrow points to the umbrella version that gathers together versions of many different packages <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line874">Next 5 numbers are the versions of each of the pkgs that are included in the highlighted umbrella version (with one-word shortnames of each above them). <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">&quot;New version 144&quot; is a link to *create* a new version, that will become 144. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line874">--- <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line874">Second box: what you get when you click on create new version <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line874">Each line represents one package avaialbe to include int he umbrella version <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line874">Drop-downs are pre-populated with the version number (for all versions 1...N) with the checkin comment for that version. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">The final column lets you select which branch you want to take a version from - if you change any value in this column, it triggers an auto-refresh of the page, so that the main drop-down for that row can be re-populated appropriately. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line874">Where packages have no branches, they just have the plain text &quot;main&quot; with no drop-down to select another branch. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">I (<a href="KenSchalk.html">KenSchalk</a>) have also been thinking about how vupdate could work with branches.  Suppose you have some system made up of many individual packages.  You probably want to think about branches in terms of the whole system.  The divergence in a given branch might only apply to certain packages.  In others, you might want to stay with the main line.  You'd use vbranch to create branches in those packages which need to diverge, but not in those packages where you're staying with the main line. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line874">The way I've been visualizing this is as though each branch is like a thread that runs through the whole package, as in this diagram: <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line867"><img alt="branches-as-threads.png" class="attachment" src="vupdateandbranches%3Faction=AttachFile&amp;do=get&amp;target=branches-as-threads.png" title="branches-as-threads.png" /> <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line874">Let's suppose vupdate has some option to follow branches. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><ul><li>In package B, if the the current version is 2, and you do &quot;vupdate -branch blue&quot;, then it would update the import to 3.blue/2, the latest version on the blue branch.  Doing &quot;vupdate -branch red&quot; or &quot;vupdate -branch green&quot; would instead get you version 5. <span class="anchor" id="line-36"></span></li><li>In package C, if the current version is 6, &quot;vupdate -branch red&quot; would update to 8.red/1, but &quot;vupdate -branch blue&quot; or &quot;vupdate -branch green&quot; would update to version 9 <span class="anchor" id="line-37"></span></li><li>In package A, regardless of which branch you specified you would be version 8 because there are no branches for this package. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></li></ul><p class="line862">Branches in Vesta today work like a tree: they fork off from the trunk and becom their own separate lineage from that point forward.  To make this <em>branch threading</em> idea work, we'd need some way to mark the successor version to a branch on the trunk.  This might be created by merging the changes from the branch into the trunk, promoting the latest version in the branch onto the trunk, or even just declaring the branch finished or obsolete and dropping whatever changes it had.  This would make branching act more like a <a class="http" href="http://en.wikipedia.org/wiki/Directed_acyclic_graph">DAG</a> than a tree.  The point is, vupdate would need some way to follow the thread out of the branch and back onto the trunk. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><p class="line867"><img alt="reconverge-rediverge.png" class="attachment" src="vupdateandbranches%3Faction=AttachFile&amp;do=get&amp;target=reconverge-rediverge.png" title="reconverge-rediverge.png" /> <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><p class="line862">I actually think this feature is useful for another reason too: the output of &quot;<a class="http" href="../vesta/doc/man/html/vlatest.1.html">vlatest</a> -b&quot; shows <strong>all</strong> branches, which is really too much information.  Branches which have been &quot;closed&quot; in this sort of way (my merging, promotion, or declaration) aren't really interesting any more.  The user is more interested in the &quot;open&quot; branches: those which represent divergences under active development, or at least actively being used, which probably require some reconcilitation. <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><p class="line862">Another thing to consider is that with this branching/converging strubture, we will probably want some way to view the full history graph.  Something like <a class="http" href="http://oandrieu.nerim.net/monotone-viz/">monotone-viz</a>. <span class="anchor" id="line-46"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

