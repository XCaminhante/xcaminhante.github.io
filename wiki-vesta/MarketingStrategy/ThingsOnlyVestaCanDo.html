<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>MarketingStrategy/ThingsOnlyVestaCanDo - Vesta Wiki</title>
<script type="text/javascript" src="../moin_static199/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static199/vesta/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static199/vesta/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static199/vesta/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static199/vesta/css/msie.css">
<![endif]-->


<link rel="alternate" title="Vesta Wiki: MarketingStrategy/ThingsOnlyVestaCanDo" href="ThingsOnlyVestaCanDo%3Fdiffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=MarketingStrategy%252FThingsOnlyVestaCanDo&amp;ddiffs=1.html" type="application/rss+xml">


<link rel="Start" href="FrontPage.html">
<link rel="Alternate" title="Wiki Markup" href="ThingsOnlyVestaCanDo%3Faction=raw.html">
<link rel="Alternate" media="print" title="Print View" href="ThingsOnlyVestaCanDo%3Faction=print.html">
<link rel="Up" href="../MarketingStrategy.html">
<link rel="Search" href="FindPage.html">
<link rel="Index" href="TitleIndex.html">
<link rel="Glossary" href="WordIndex.html">
<link rel="Help" href="HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="ThingsOnlyVestaCanDo.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="FrontPage.html"><img src="wiki/vesta/img/1line.png" alt="Vesta" height=44 width=202></a></div>
<div id="locationline">

<ul id="pagelocation">
<li><a href="../MarketingStrategy.html">MarketingStrategy</a></li><li><a href="ThingsOnlyVestaCanDo.html">ThingsOnlyVestaCanDo</a></li>
</ul>

</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a href="FindPage.html">FindPage</a></li><li class="wikilink"><a href="HelpContents.html">HelpContents</a></li><li class="current"><a href="ThingsOnlyVestaCanDo.html">ThingsOnlyVestaCanDo</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="ThingsOnlyVestaCanDo%3Faction=login.html" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="Things_Only_Vesta_Can_Do">Things Only Vesta Can Do</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="ThingsOnlyVestaCanDo.html#Things_Only_Vesta_Can_Do">Things Only Vesta Can Do</a><ol><li>
<a href="ThingsOnlyVestaCanDo.html#Keep_Editing_While_Building">Keep Editing While Building</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Share_Work-in-progress_Precisely">Share Work-in-progress Precisely</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Share_My_Compilation_Results">Share My Compilation Results</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Rebuild_Only_When_.2AReally.2A_Changed">Rebuild Only When *Really* Changed</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Checking_in.2Fout_doesnt_cause_rebuild">Checking in/out doesnt cause rebuild</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#A.22Perfect.22_version_control">&quot;Perfect&quot; version control</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Recording_a_2-Step_Change">Recording a 2-Step Change</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Rebuilding_when_only_the_version_of_the_compiler_changed">Rebuilding when only the version of the compiler changed</a></li><li>
<a href="ThingsOnlyVestaCanDo.html#Rebuilding_when_only_the_makefile_changed">Rebuilding when only the makefile changed</a></li></ol></li></ol></div> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line862">Up in <a href="../MarketingStrategy.html">MarketingStrategy</a>, Adam suggested &quot;10 tutorials: 10 things that only vesta can do&quot;.  This page has some random ideas. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867">
<h2 id="Keep_Editing_While_Building">Keep Editing While Building</h2>
<span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line862">Vesta builds only use immutable (ie, read-only) versions of source files.  When you're actively working on something, this means that an immutable snapshot gets taken when you build.  (See <a class="http" href="../../vesta/doc/man/html/vadvance.gif">the diagram</a> in <a class="http" href="../../vesta/doc/man/html/vadvance.1.html">the vadvance(1) man page</a>.) <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">If your build process is long-running, you can start working on the next edit while it's compiling your last one.  The build will be using an immutable snapshot, not your editable copy.  In other words <em>editing cannot affect on-going builds</em>. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line867">
<h2 id="Share_Work-in-progress_Precisely">Share Work-in-progress Precisely</h2>
<span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line874">If you're in the middle of working on a change, but you need to share your work with another user, just point them at one of your immutable (ie, read-only) snapshots.  They can use that to build or examine your changes while you keep editing.  Because it's an immutable snapshot, they don't need to worry about your forward progress interfering with what they're doing. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
<h2 id="Share_My_Compilation_Results">Share My Compilation Results</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">If I give you my new .hxx file to incorporate into your build, with CVS/make you will have to re-compile much of your source tree.  With vesta, you automatically can cache-hit on all the compilations i've already done with this .hxx file. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867">
<h2 id="Rebuild_Only_When_.2AReally.2A_Changed">Rebuild Only When *Really* Changed</h2>
<span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line874">Vesta fingerprints a file's contents and uses a changed fingerprint to determine a change in a file -- not dates. <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line874">Thus, If i wind up changing a file's date (touch it, copy it, or edit it--then un-edit and save, etc), but dont change it, vesta sees that it's the same file and does not rebuild.  'make' would see it as updated.  If it is a header file (.h .hxx) this might trigger many re-compiles. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line874">And, if i build my program (build 0), then change a file and build (build 1), then change that file back to exactly what it was in build 0 (ie, i changed my mind) and build again (build 2), 'make' will rebuild everything that depends on the file, whereas vesta will cache-hit on the results from build 0 and if nothing else changed, will finish (almost) instantly. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line867">
<h2 id="Checking_in.2Fout_doesnt_cause_rebuild">Checking in/out doesnt cause rebuild</h2>
<span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line874">The act of checking-out a package creates a new snapshot of that package in a snapshot dir (called a session dir), but doesnt change any file contents.  Assuming that the checked-in files have already been built successfully (which is typical), if you rebuild immediately after check-out, before making any new changes to file contents, vesta is smart enough to see that no files changed and you will cache hit and your build will finish almost immediately. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line874">Similarly, the act of checking-in is one of moving files from the snapshot into a new directory named for the new version.  Assuming you built right before checking-in, and haven't changed any sources since then (which is typical), if you build the version you just checked-in, vesta is smart enough to see that no file contents actually changed and you will cache hit and your build will finish almost immediately. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line867">
<h2 id="A.22Perfect.22_version_control">&quot;Perfect&quot; version control</h2>
<span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line862">Vesta may not quite exhibit <a href="../PerfectVersionControl.html">PerfectVersionControl</a>, but it gets much closer than any other known SCM or Build Systems.  <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line867">
<h2 id="Recording_a_2-Step_Change">Recording a 2-Step Change</h2>
<span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line874">Say you're editing a file, fixing a bug, and at the same time you decide to change a variable name throughout the file.  Looking at diffs of this change, it would be hard to extract the significant bug-fix change, from the trivial variable name change. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line874">To make this easier with CVS, you could change only the variable name, check-in, then check-out again and make the bug-fix change.  While this would work to isolate the 2 changes, your variable name change is now visible to everybody and may trigger reubuilds that really aren't necessary. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line874">Another CVS option is you could create a branch, just to isolate these 2 changes, but that's expensive. <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line862">With vesta's work-area snapshotting, you can make the variable change, do a <tt>vadvance</tt> and store that version forever.  It is in your permanent, read-only snapshot dir corresponding to your work-area, for easy diffing, but others will only see it if they explicitly ask to use that version (which they typically would not). <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line867">
<h2 id="Rebuilding_when_only_the_version_of_the_compiler_changed">Rebuilding when only the version of the compiler changed</h2>
<span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><p class="line862">If you're using <tt>make</tt>, and you upgrade your compiler, <tt>make</tt> does <em>not</em> automatically detect this change and rebuild.  Most people just <tt>make&nbsp;clean</tt> and rebuild everything.  That's because it can be hard to determine just what needs to recompile -- which would be a manual process. <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line862">Vesta does detect just exactly what needs to recompile based on a new compiler version, since the compiler is just another input to the build.  In fact, changing the version of any tool in your build will trigger a re-build of <em>everything</em> that depends on that tool, and <em>only</em> what depends on that tool.  [How do other build systems handle this?] <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line867">
<h2 id="Rebuilding_when_only_the_makefile_changed">Rebuilding when only the makefile changed</h2>
<span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><p class="line862">If you're using <tt>make</tt>, and you change only the <tt>makefile</tt>, <tt>make</tt> may or may not rebuild.  If you've added a new dependency which has a newer date, then you get a rebuild.  But if you add a new dependency with an older date, or remove a dependency (ie include file), <tt>make</tt> does <em>not</em> detect this change and rebuild.  Most people delete the build results files (eg, obj file, exe) manually, or just <tt>make&nbsp;clean</tt> and rebuild everything, to work around this. <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line862">Vesta considers the <tt>build.ves</tt> file (<tt>makefile</tt> equivalent) just another source input, and does dependency detection on it the same way it does on every other source file, so it determines exactly what needs to recompile based on the makefile change.  [How do other build systems handle this?] <span class="anchor" id="line-62"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

